<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Python Metaclasså…ƒç±»ä¸ä½¿ç”¨æ¡ˆä¾‹ | FdxCauponağŸ</title><meta name="author" content="Fed_Dragon"><meta name="copyright" content="Fed_Dragon"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Metaclass æ˜¯ Python é‡Œç›¸å¯¹æ¯”è¾ƒå†·é—¨çš„ä¸€ä¸ªè¯é¢˜ï¼Œä½¿ç”¨å…ƒç±»å¯ä»¥åœ¨ç±»åˆ›å»ºè¿‡ç¨‹ä¸­è¿›è¡Œä¿®æ”¹ï¼Œå®ç°ä¸€äº›å¾ˆæœ‰æ„æ€çš„ä¸œè¥¿ï¼Œæ¯”å¦‚å•ä¾‹å’Œæ–¹æ³•é‡è½½ type ä¸‰å‚æ•°åŠ¨æ€åˆ›å»ºç±»ç±»ä¹Ÿæ˜¯å¯¹è±¡åœ¨ Python ä¸­ï¼Œä¸‡ç‰©çš†æ˜¯å¯¹è±¡ï¼Œå³ä½¿æ˜¯ç±»æœ¬èº«ï¼Œä¹Ÿæ˜¯ç”±æ‰€è°“çš„å…ƒç±»å®ä¾‹åŒ–å‡ºæ¥çš„ã€‚å¯¹äºä¸€ä¸ªå®ä¾‹ï¼Œå¯ä»¥é€šè¿‡typeæŸ¥çœ‹å…¶å¯¹åº”çš„ç±»å‹ã€‚ 123class A(): ...a &#x3D; A()    # repr(a) -&gt; &amp;">
<meta property="og:type" content="article">
<meta property="og:title" content="Python Metaclasså…ƒç±»ä¸ä½¿ç”¨æ¡ˆä¾‹">
<meta property="og:url" content="https://www.fdxblog.tk/2022/11/18/Python-Metaclass%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/index.html">
<meta property="og:site_name" content="FdxCauponağŸ">
<meta property="og:description" content="Metaclass æ˜¯ Python é‡Œç›¸å¯¹æ¯”è¾ƒå†·é—¨çš„ä¸€ä¸ªè¯é¢˜ï¼Œä½¿ç”¨å…ƒç±»å¯ä»¥åœ¨ç±»åˆ›å»ºè¿‡ç¨‹ä¸­è¿›è¡Œä¿®æ”¹ï¼Œå®ç°ä¸€äº›å¾ˆæœ‰æ„æ€çš„ä¸œè¥¿ï¼Œæ¯”å¦‚å•ä¾‹å’Œæ–¹æ³•é‡è½½ type ä¸‰å‚æ•°åŠ¨æ€åˆ›å»ºç±»ç±»ä¹Ÿæ˜¯å¯¹è±¡åœ¨ Python ä¸­ï¼Œä¸‡ç‰©çš†æ˜¯å¯¹è±¡ï¼Œå³ä½¿æ˜¯ç±»æœ¬èº«ï¼Œä¹Ÿæ˜¯ç”±æ‰€è°“çš„å…ƒç±»å®ä¾‹åŒ–å‡ºæ¥çš„ã€‚å¯¹äºä¸€ä¸ªå®ä¾‹ï¼Œå¯ä»¥é€šè¿‡typeæŸ¥çœ‹å…¶å¯¹åº”çš„ç±»å‹ã€‚ 123class A(): ...a &#x3D; A()    # repr(a) -&gt; &amp;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.fdxblog.tk/img/cover6.webp">
<meta property="article:published_time" content="2022-11-19T03:48:32.000Z">
<meta property="article:modified_time" content="2022-11-23T16:37:12.453Z">
<meta property="article:author" content="Fed_Dragon">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="æè¿°å™¨">
<meta property="article:tag" content="å…ƒç±»">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.fdxblog.tk/img/cover6.webp"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.fdxblog.tk/2022/11/18/Python-Metaclass%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Python Metaclasså…ƒç±»ä¸ä½¿ç”¨æ¡ˆä¾‹',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-24 00:37:12'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><style>@font-face{font-family:'zhuziawan';font-style:normal;font-weight:400;src:url(../../../../img/zhuziawan.woff2) format("woff2")}</style><meta name="generator" content="Hexo 6.3.0"></head><body><link rel="stylesheet" href="/css/barber-shop.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">5</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-newspaper"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> é“¾æ¥</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/cover6.webp'); backdrop-filter: blur(2px)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">FdxCauponağŸ</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-newspaper"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> é“¾æ¥</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Python Metaclasså…ƒç±»ä¸ä½¿ç”¨æ¡ˆä¾‹</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-11-19T03:48:32.000Z" title="å‘è¡¨äº 2022-11-19 11:48:32">2022-11-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-11-23T16:37:12.453Z" title="æ›´æ–°äº 2022-11-24 00:37:12">2022-11-24</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Python Metaclasså…ƒç±»ä¸ä½¿ç”¨æ¡ˆä¾‹"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>Metaclass æ˜¯ Python é‡Œç›¸å¯¹æ¯”è¾ƒå†·é—¨çš„ä¸€ä¸ªè¯é¢˜ï¼Œä½¿ç”¨å…ƒç±»å¯ä»¥åœ¨ç±»åˆ›å»ºè¿‡ç¨‹ä¸­è¿›è¡Œä¿®æ”¹ï¼Œå®ç°ä¸€äº›å¾ˆæœ‰æ„æ€çš„ä¸œè¥¿ï¼Œæ¯”å¦‚<strong>å•ä¾‹</strong>å’Œ<strong>æ–¹æ³•é‡è½½</strong></p>
<h2 id="type-ä¸‰å‚æ•°åŠ¨æ€åˆ›å»ºç±»"><a href="#type-ä¸‰å‚æ•°åŠ¨æ€åˆ›å»ºç±»" class="headerlink" title="type ä¸‰å‚æ•°åŠ¨æ€åˆ›å»ºç±»"></a><code>type</code> ä¸‰å‚æ•°åŠ¨æ€åˆ›å»ºç±»</h2><h3 id="ç±»ä¹Ÿæ˜¯å¯¹è±¡"><a href="#ç±»ä¹Ÿæ˜¯å¯¹è±¡" class="headerlink" title="ç±»ä¹Ÿæ˜¯å¯¹è±¡"></a>ç±»ä¹Ÿæ˜¯å¯¹è±¡</h3><p>åœ¨ Python ä¸­ï¼Œä¸‡ç‰©çš†æ˜¯å¯¹è±¡ï¼Œå³ä½¿æ˜¯ç±»æœ¬èº«ï¼Œä¹Ÿæ˜¯ç”±æ‰€è°“çš„<strong>å…ƒç±»</strong>å®ä¾‹åŒ–å‡ºæ¥çš„ã€‚å¯¹äºä¸€ä¸ªå®ä¾‹ï¼Œå¯ä»¥é€šè¿‡<code>type</code>æŸ¥çœ‹å…¶å¯¹åº”çš„ç±»å‹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(): ...</span><br><span class="line">a = A()    <span class="comment"># repr(a) -&gt; &lt;__main__.A object at 0x00000216F2C0E050&gt;</span></span><br><span class="line">B = <span class="built_in">type</span>(a)</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„<code>type(a)</code>è¿”å›çš„å¹¶ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯åˆ›å»ºäº†<code>a</code>çš„ç±»<code>A</code>çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸‹åˆ—çš„æ“ä½œéƒ½æ˜¯åˆæ³•çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c = B()    <span class="comment"># repr(c) -&gt; &lt;__main__.A object at 0x00000216F2C0DA50&gt;</span></span><br><span class="line"><span class="built_in">print</span>(B <span class="keyword">is</span> A)   <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<p>æ—¢ç„¶<code>type(x)</code>è¿”å›åˆ›å»ºäº†<code>x</code>çš„å¯¹è±¡ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ç±»å¿…ç„¶ä¹Ÿç”±ä¸€ä¸ª<strong>å…ƒç±»</strong>åˆ›å»ºã€‚å¦‚æœæ²¡æœ‰ç‰¹åˆ«å†™å‡ºæŒ‡å®šçš„å…ƒç±»ï¼Œåˆ™ä¼šé»˜è®¤ä¸º<code>type</code>ï¼Œ<br>ä¹Ÿå°±æ˜¯è¯´<code>a</code>æ˜¯<code>A</code>ç±»çš„å¯¹è±¡ï¼Œè€Œ<code>A</code>æ˜¯<code>type</code>çš„å¯¹è±¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span>(A)    <span class="comment"># &lt;class &#x27;type&#x27;&gt;</span></span><br><span class="line"><span class="built_in">type</span>(a) <span class="keyword">is</span> A    <span class="comment"># True</span></span><br><span class="line"><span class="built_in">type</span>(A) <span class="keyword">is</span> <span class="built_in">type</span>    <span class="comment"># True</span></span><br><span class="line"><span class="built_in">type</span>(<span class="built_in">type</span>) <span class="keyword">is</span> <span class="built_in">type</span>    <span class="comment"># True</span></span><br><span class="line"><span class="comment"># type --å®ä¾‹åŒ–--&gt; A --å®ä¾‹åŒ–--&gt; a</span></span><br><span class="line"><span class="comment"># a --å¯¹è±¡--&gt; A --å¯¹è±¡--&gt; type </span></span><br></pre></td></tr></table></figure>

<h3 id="classå…³é”®å­—æ˜¯ä¸ªè¯­æ³•ç³–"><a href="#classå…³é”®å­—æ˜¯ä¸ªè¯­æ³•ç³–" class="headerlink" title="classå…³é”®å­—æ˜¯ä¸ªè¯­æ³•ç³–"></a><code>class</code>å…³é”®å­—æ˜¯ä¸ªè¯­æ³•ç³–</h3><p><code>type</code>çš„å•å‚æ•°å½¢å¼å°†è¿”å›å¯¹è±¡çš„ç±»å‹ï¼Œè€Œä¸‰å‚æ•°å½¢å¼åˆ™å°†è¿”å›ä¸€ä¸ªæ–°åˆ›å»ºçš„ç±»ï¼š<code>type(name, bases, namespace)</code></p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ç±»å‹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>ç±»çš„åå­— (<code>__qualname__</code>å±æ€§)</td>
</tr>
<tr>
<td><code>bases</code></td>
<td><code>tuple[type]</code></td>
<td>çˆ¶ç±» (<code>__mro__</code>)</td>
</tr>
<tr>
<td><code>namespace</code></td>
<td><code>Mapping[str, Any]</code></td>
<td>ç±»é‡Œçš„å±æ€§ (<strong>ä¸æ˜¯<code>__dict__</code>!</strong>)</td>
</tr>
</tbody></table>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢çš„ä¸¤ç§åˆ›å»ºç±»çš„æ–¹æ³•æ˜¯å·®ä¸å¤šçš„ï¼Œä¸¤ä¸ª<code>A</code>éƒ½æœ‰<code>x</code>å±æ€§å’Œ<code>hi</code>æ–¹æ³•ï¼Œ<code>class</code>å…³é”®å­—åˆ°æœ€åè¿˜æ˜¯ä¼šè°ƒç”¨<code>type</code>ä¸‰å‚æ•°åˆ›å»ºç±»:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>: ...</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">B</span>):</span><br><span class="line">    x = <span class="number">1</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hi</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;hi from <span class="subst">&#123;self&#125;</span>&quot;</span>) </span><br><span class="line"><span class="comment"># --------------</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hi</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;hi from <span class="subst">&#123;self&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">A = <span class="built_in">type</span>(<span class="string">&quot;A&quot;</span>, (B,), &#123;<span class="string">&quot;x&quot;</span>: <span class="number">1</span>, <span class="string">&quot;hi&quot;</span>: hi&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="ç±»çš„åˆ›å»ºè¿‡ç¨‹"><a href="#ç±»çš„åˆ›å»ºè¿‡ç¨‹" class="headerlink" title="ç±»çš„åˆ›å»ºè¿‡ç¨‹"></a>ç±»çš„åˆ›å»ºè¿‡ç¨‹</h3><p>ä¹‹æ‰€ä»¥ä¸Šé¢çš„ä¸¤ä¸ª<code>A</code>ä¸å®Œå…¨ä¸€æ ·æ˜¯å› ä¸ºä½¿ç”¨<code>class</code>å…³é”®å­—çš„æ–¹æ³•ä¼šå…ˆè°ƒç”¨å¯¹åº”å…ƒç±»çš„<code>__prepare__</code>æ–¹æ³•ç”Ÿæˆ<code>namespace</code>å®¹å™¨ï¼Œå†ä»¥è¿™ä¸ªå®¹å™¨ä¸º<code>locals</code>è¿è¡Œç±»å®šå†…çš„ä»£ç ï¼Œä¸”æ·»åŠ æ¯”å¦‚<code>__module__</code>, <code>__annotation__</code>ç­‰å…ƒä¿¡æ¯ã€‚ä½¿ç”¨<code>class</code>å…³é”®å­—åˆ›å»ºç±»<code>B</code>çš„å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    x = <span class="number">1</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hi</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;hi!&quot;</span>)</span><br><span class="line"></span><br><span class="line">code = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">y = 2</span></span><br><span class="line"><span class="string">def hello(self):</span></span><br><span class="line"><span class="string">    print(f&quot;Hello from &#123;self&#125;&quot;)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">namespace = <span class="built_in">type</span>.__prepare__(<span class="string">&quot;B&quot;</span>, (A,))    <span class="comment"># type.__prepare__ æ°¸è¿œè¿”å›ç©ºå­—å…¸</span></span><br><span class="line"><span class="built_in">exec</span>(code, <span class="built_in">globals</span>(), namespace)</span><br><span class="line"><span class="comment"># namespace: &#123;&#x27;y&#x27;: 2, &#x27;hello&#x27;: &lt;function hello at 0x000002EECCD81510&gt;&#125;</span></span><br><span class="line"><span class="comment"># æ·»åŠ  __module__, __qualname__, å’Œ __annotation__ ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰</span></span><br><span class="line">B = <span class="built_in">type</span>(<span class="string">&quot;B&quot;</span>, (A,), namespace)</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆå…ƒç±»çš„ç›®çš„å°±å¾ˆæ˜æ˜¾äº†â€”â€”è‡ªå®šä¹‰ç±»åˆ›å»ºçš„æµç¨‹ã€‚</p>
<h3 id="typeå…³é”®å­—å‚æ•°ä¸-init-subclass"><a href="#typeå…³é”®å­—å‚æ•°ä¸-init-subclass" class="headerlink" title="typeå…³é”®å­—å‚æ•°ä¸__init_subclass__"></a><code>type</code>å…³é”®å­—å‚æ•°ä¸<code>__init_subclass__</code></h3><p>å­ç±»åœ¨ç»§æ‰¿çˆ¶ç±»æ—¶å¯ä»¥é€šè¿‡å…³é”®å­—å‚æ•°ç»™äºˆçˆ¶ç±»ä¸€äº›ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä¼šè¢«çˆ¶ç±»çš„<code>__init_subclass__</code>æ¥æ”¶åˆ°ï¼Œæ¯”å¦‚ä¸‹é¢çš„åŠ¨æ€ç”Ÿæˆ<code>repr</code>æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Rank</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init_subclass__</span>(<span class="params">cls, prefix</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">            <span class="keyword">return</span> <span class="string">f&quot;[<span class="subst">&#123;prefix&#125;</span>] çº§åˆ«ç©å®¶&quot;</span></span><br><span class="line">        cls.__repr__ = __repr__</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vip</span>(Rank, prefix=<span class="string">&quot;VIP&quot;</span>): ...</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mvp</span>(Rank, prefix=<span class="string">&quot;MVP&quot;</span>): ...</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Vip(), Mvp())    <span class="comment"># [VIP] çº§åˆ«ç©å®¶ [MVP] çº§åˆ«ç©å®¶</span></span><br></pre></td></tr></table></figure>
<p>è€Œè¿™äº›ä¿¡æ¯åˆ™åœ¨ç±»åˆ›å»ºæ—¶ä»¥<strong>å…³é”®å­—</strong>å‚æ•°çš„æ–¹å¼ä¼ ç»™äº†å…ƒç±»ï¼Œç±»ä¼¼è¿™æ ·ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Vip = <span class="built_in">type</span>(<span class="string">&quot;Vip&quot;</span>, (Rank,), &#123;&#125;, prefix=<span class="string">&quot;VIP&quot;</span>)</span><br><span class="line">Mvp = <span class="built_in">type</span>(<span class="string">&quot;Vip&quot;</span>, (Rank,), &#123;&#125;, prefix=<span class="string">&quot;MVP&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Hello-world-Metaclass"><a href="#Hello-world-Metaclass" class="headerlink" title="Hello world, Metaclass!"></a>Hello world, Metaclass!</h2><h3 id="åˆ›å»ºä¸€ä¸ªæœ€åŸºæœ¬çš„å…ƒç±»"><a href="#åˆ›å»ºä¸€ä¸ªæœ€åŸºæœ¬çš„å…ƒç±»" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæœ€åŸºæœ¬çš„å…ƒç±»"></a>åˆ›å»ºä¸€ä¸ªæœ€åŸºæœ¬çš„å…ƒç±»</h3><p>æ‰€æœ‰<code>mro</code>é‡Œæœ‰<code>type</code>çš„ç±»å°±æ˜¯å…ƒç±»ï¼Œè¦åˆ›å»ºä¸€ä¸ªæœ€ç®€å•çš„å…ƒç±»ï¼Œåªéœ€è¦ç»§æ‰¿äº<code>type</code>ç±»ã€‚æˆ‘åˆ›å»ºäº†<code>MyMeta</code>å…ƒç±»ï¼Œè€Œåœ¨è¿™é‡Œé¢ä¹Ÿåªæ˜¯æŠŠä¼ åˆ°<code>__prepare__</code>å’Œ<code>__new__</code>çš„å‚æ•°æ‰“å°å‡ºæ¥äº†ã€‚ç»å¤§å¤šæ•°æƒ…å†µä¸‹å…ƒç±»æœ€åè¿˜æ˜¯ä¼šä¾æ‰˜äº<code>type</code>ï¼Œç”±<code>type</code>å®ŒæˆçœŸæ­£çš„ç±»åˆ›å»ºï¼Œè€Œè‡ªå·±åªä¿®æ”¹ä¸€äº›å‚æ•°æˆ–è€…æ·»åŠ ä¸€äº›æ–¹æ³•ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyMeta</span>(<span class="title class_ inherited__">type</span>):</span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__prepare__</span>(<span class="params">mcs, name, bases, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;In MyMeta __prepare__: <span class="subst">&#123;mcs=&#125;</span>, <span class="subst">&#123;name=&#125;</span>, <span class="subst">&#123;bases=&#125;</span>, <span class="subst">&#123;kwargs=&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>().__prepare__(name, bases)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">mcs, name, bases, namespace, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;In MyMeta __new__: <span class="subst">&#123;mcs=&#125;</span>, <span class="subst">&#123;name=&#125;</span>, <span class="subst">&#123;bases=&#125;</span>, <span class="subst">&#123;namespace=&#125;</span>, <span class="subst">&#123;kwargs=&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>().__new__(mcs, name, bases, namespace, **kwargs)</span><br></pre></td></tr></table></figure>
<p>è¦ä½¿ç”¨Metaclassï¼Œåªéœ€è¦å°†ç±»å®šä¹‰ä¸Šæ·»åŠ ä¸Š<code>metaclass=MyMeta</code>å³å¯ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯è¿™ä¸ªå‚æ•°å¹¶ä¸ä¼šä¼ ç»™ä»»ä½•<code>__init_subclass__</code>æ–¹æ³•ï¼Œç”šè‡³åœ¨å…ƒç±»çš„<code>__prepare__</code>æ–¹æ³•çš„<code>kwargs</code>å†…éƒ½æ‰¾ä¸åˆ°<code>&#123;&quot;metaclass&quot;: MyMeta&#125;</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(metaclass=MyMeta):</span><br><span class="line">    x = <span class="number">1</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hi</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;hello from <span class="subst">&#123;self&#125;</span>!&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>åœ¨å®šä¹‰è¿™ä¸ªç±»æ—¶ï¼Œäº§ç”Ÿäº†å¦‚ä¸‹çš„è¾“å‡ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In MyMeta __prepare__: mcs=&lt;<span class="keyword">class</span> <span class="string">&#x27;__main__.MyMeta&#x27;</span>&gt;, name=<span class="string">&#x27;A&#x27;</span>, bases=(), kwargs=&#123;&#125;</span><br><span class="line">In MyMeta __new__: mcs=&lt;<span class="keyword">class</span> <span class="string">&#x27;__main__.MyMeta&#x27;</span>&gt;, name=<span class="string">&#x27;A&#x27;</span>, bases=(), namespace=&#123;</span><br><span class="line">    <span class="string">&#x27;__module__&#x27;</span>: <span class="string">&#x27;__main__&#x27;</span>, </span><br><span class="line">    <span class="string">&#x27;__qualname__&#x27;</span>: <span class="string">&#x27;A&#x27;</span>, </span><br><span class="line">    <span class="string">&#x27;x&#x27;</span>: <span class="number">1</span>, </span><br><span class="line">    <span class="string">&#x27;hi&#x27;</span>: &lt;function A.hi at <span class="number">0x000001E952AFB370</span>&gt;</span><br><span class="line">&#125;, kwargs=&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ª<code>A</code>ç±»çš„å¯¹è±¡<code>a</code>ï¼Œå†æ¥çœ‹çœ‹ç°åœ¨è°åˆ›å»ºäº†è°ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = A()</span><br><span class="line"><span class="built_in">type</span>(a)    <span class="comment"># &lt;class &#x27;__main__.A&#x27;&gt;</span></span><br><span class="line"><span class="built_in">type</span>(<span class="built_in">type</span>(a))    <span class="comment"># &lt;class &#x27;__main__.MyMeta&#x27;&gt;</span></span><br><span class="line"><span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(a)))   <span class="comment"># &lt;class &#x27;type&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹è§ï¼Œå³ä½¿æ˜¯åˆ¶é€ å…¶ä»–ç±»çš„å…ƒç±»ï¼Œä¹Ÿæ˜¯ç”±<code>type</code>è¿™ä¸ªâ€œè¶…å…ƒç±»â€åˆ›å»ºçš„ã€‚</p>
<h3 id="ä½¿ç”¨å…ƒç±»å®ç°å•ä¾‹æ¨¡å¼"><a href="#ä½¿ç”¨å…ƒç±»å®ç°å•ä¾‹æ¨¡å¼" class="headerlink" title="ä½¿ç”¨å…ƒç±»å®ç°å•ä¾‹æ¨¡å¼"></a>ä½¿ç”¨å…ƒç±»å®ç°å•ä¾‹æ¨¡å¼</h3><p>å‡è®¾ä½ åœ¨å¼€å‘ä¸€æ¬¾æ¸¸æˆï¼Œè€Œè¿™ä¸ªæ¸¸æˆéœ€è¦ä¸€ä¸ª <strong>å…¨å±€è®¾ç½® (Config)</strong> ç±»ï¼Œç”±äºå…¨å±€è®¾ç½®çš„ç‰¹æ®Šæ€§ï¼Œæ— è®ºæ€ä¹ˆå®ä¾‹åŒ–åº”å½“æ€»æ˜¯æ‹¿åˆ°åŒä¸€ä¸ªå¯¹è±¡(<code>Config() is Config()</code>)ï¼Œè¿™ç§ä¸€ä¸ªç±»åªåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„è®¾è®¡æ¨¡å¼è¢«ç§°ä¸º <strong>å•ä¾‹ (Singleton)</strong><br>æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å½“ä¸€ä¸ªç±»çš„<code>__call__</code>æ–¹æ³•è¢«è°ƒç”¨æ—¶æ°¸è¿œè¿”å›åŒä¸€ä¸ªå®ä¾‹ã€‚åœ¨Pythonä¸­ï¼Œ<code>__call__</code>æ–¹æ³•å°±æ˜¯åœ¨ä¸€ä¸ªå¯¹è±¡åé¢åŠ æ‹¬å·ï¼Œå³<code>Config()</code> ä¸ <code>Config.__call__()</code>æ˜¯ç­‰æ•ˆçš„ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SingletonMeta</span>(<span class="title class_ inherited__">type</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">cls, *args, **kwargs</span>):    <span class="comment"># A() æ—¶è¢«è°ƒç”¨</span></span><br><span class="line">        <span class="built_in">print</span>(cls)    <span class="comment"># &lt;class &#x27;__main__.A&#x27;&gt;</span></span><br><span class="line">        <span class="keyword">if</span> (instance := <span class="built_in">getattr</span>(cls, <span class="string">&quot;_instance&quot;</span>, <span class="literal">None</span>)) <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            cls._instance = instance = <span class="built_in">super</span>().__call__(*args, **kwargs)    <span class="comment"># äº¤ç»™ type ç±»å¤„ç†</span></span><br><span class="line">        <span class="keyword">return</span> instance</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(metaclass=SingletonMeta):</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(A() <span class="keyword">is</span> A())    <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™æ®µä»£ç é‡Œï¼Œ<code>SingletonMeta</code>å¹¶æ²¡æœ‰æ›´æ”¹<code>A</code>ç±»åˆ›å»ºæ—¶çš„ç‰¹æ€§ï¼Œè€Œæ˜¯åœ¨<code>A</code>å°è¯•åœ¨å®ä¾‹åŒ–æ—¶æ£€æŸ¥å…¶<code>__dict__</code>é‡Œæœ‰æ²¡æœ‰<code>_instance</code>å±æ€§ï¼Œå¦‚æœæœ‰çš„è¯å°±ç›´æ¥è¿”å›é‚£ä¸ª<code>_instance</code><br>å¦‚æœä½ å¯¹äºä¸ºä»€ä¹ˆ<code>A()</code>ä¼šè°ƒç”¨<code>SingletonMeta.__call__</code>æ„Ÿåˆ°ç–‘æƒ‘çš„è¯ï¼Œä¸å¦¨è¯•è¯•è¿™ä¹ˆç†è§£ï¼š</p>
<ul>
<li>ç°åœ¨æœ‰ä¸€ä¸ªç±»<code>Add</code>å®ç°äº†<code>__add__</code>æ–¹æ³•<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Add</span>:</span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">__add__</span>(<span class="params">self, other</span>):</span><br><span class="line">       <span class="keyword">return</span> <span class="number">2</span></span><br></pre></td></tr></table></figure></blockquote>
</li>
<li>è¿™ä¸ª<code>__add__</code>æ–¹æ³•æ˜¯è“å›¾â€”â€”åªæœ‰<code>Add</code>ç±»çš„å¯¹è±¡ç›¸åŠ æ—¶ä¼šè°ƒç”¨<code>A.__add__</code>ï¼Œåœ¨ç±»å±‚é¢ä¸Šç›¸åŠ ä¼šæŠ¥é”™<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">add = Add()</span><br><span class="line"><span class="built_in">print</span>(add + <span class="number">1</span>)    <span class="comment"># 2</span></span><br><span class="line"><span class="built_in">print</span>(Add + <span class="number">1</span>)    <span class="comment"># TypeError: unsupported operand type(s) for +: &#x27;type&#x27; and &#x27;int&#x27;</span></span><br></pre></td></tr></table></figure></blockquote>
</li>
<li>é‚£ä¹ˆ<code>A</code>ç±»æ—¢ç„¶æ˜¯<code>SingletonMeta</code>çš„å¯¹è±¡ï¼Œè‡ªç„¶ä¼šæ‰¾åˆ°<code>SingletonMeta</code>ä¸Šçš„æ–¹æ³•<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A = SingletonMeta(<span class="string">&quot;A&quot;</span>, (), &#123;&#125;)</span><br><span class="line">A()    <span class="comment"># è°ƒç”¨ SingletonMeta çš„ __call__</span></span><br></pre></td></tr></table></figure></blockquote>
</li>
</ul>
<h3 id="Pythonä¼ªè¾“å‡ºæµ"><a href="#Pythonä¼ªè¾“å‡ºæµ" class="headerlink" title="Pythonä¼ªè¾“å‡ºæµ"></a>Pythonä¼ªè¾“å‡ºæµ</h3><p>å¯ä»¥é€šè¿‡åœ¨å…ƒç±»å®šä¹‰<code>__lshift__</code>ä¸<code>__rlshift__</code>æ–¹æ³•åœ¨ç±»çš„å±‚é¢ä¸Šä¼ªé€ è¾“å‡ºæµï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stream</span>(<span class="title class_ inherited__">type</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__lshift__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(other, Flush): <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line">        <span class="built_in">print</span>(other, end=<span class="string">&quot;&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Flush</span>(<span class="title class_ inherited__">type</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__rlshift__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>, flush=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">cout</span>(metaclass=Stream): ...</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">endl</span>(metaclass=Flush): ...</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">&quot; Hello world! &quot;</span> &lt;&lt; Flush &lt;&lt; endl    <span class="comment"># 1 Hello world! &lt;class &#x27;__main__.Flush&#x27;&gt; </span></span><br></pre></td></tr></table></figure>
<p>Python å¯¹äºè¿ç®—ç¬¦æœ‰ä¸¤å¥—é­”æ³•æ–¹æ³•ï¼Œå¸¦<code>r</code>çš„å’Œä¸å¸¦<code>r</code>çš„ï¼Œå…¶åŒºåˆ«æ˜¯ Python ä¼šå…ˆè°ƒç”¨ <code>left.__OP__(right)</code>ï¼Œå¦‚æœè¿”å›äº† <code>NotImplemented</code> åˆ™ä¼šå°è¯• <code>right.__rOP__(left)</code>ï¼Œå¦‚æœéƒ½å¤±è´¥äº†æ‰ä¼šæŠ¥é”™ã€‚</p>
<h3 id="ç®€æ˜“ç‰ˆæŠ½è±¡ç±»ï¼šAbstractBaseClass"><a href="#ç®€æ˜“ç‰ˆæŠ½è±¡ç±»ï¼šAbstractBaseClass" class="headerlink" title="ç®€æ˜“ç‰ˆæŠ½è±¡ç±»ï¼šAbstractBaseClass"></a>ç®€æ˜“ç‰ˆæŠ½è±¡ç±»ï¼šAbstractBaseClass</h3><p>Python çš„æŠ½è±¡ç±»æ­£å¼åŸºäºå…ƒç±»å®ç°çš„ï¼Œç®€åŒ–ç‰ˆå®ç°æ€è·¯ï¼š</p>
<ol>
<li>ä½¿ç”¨ä¸€ä¸ªè£…é¥°å™¨å°†æŸäº›æ–¹æ³•æ ‡ä¸ºæŠ½è±¡æ–¹æ³•<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">abstractmethod</span>(<span class="params">f</span>):</span><br><span class="line">  f.__abstract__ = <span class="literal">True</span></span><br><span class="line">  <span class="keyword">return</span> f</span><br></pre></td></tr></table></figure></blockquote>
</li>
<li>åœ¨<code>__call__</code>æ–¹æ³•ä¸Šåšæ‰‹è„šï¼Œç¡®ä¿æ‰€æœ‰æ–¹æ³•éƒ½ä¸æ˜¯æŠ½è±¡çš„æ‰å®ä¾‹åŒ–ï¼Œåä¹‹æŠ¥é”™<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractBaseClassMeta</span>(<span class="title class_ inherited__">type</span>):</span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">cls, *args, **kwargs</span>):</span><br><span class="line">       <span class="keyword">if</span> <span class="built_in">any</span>(</span><br><span class="line">           attr <span class="keyword">for</span> _, attr <span class="keyword">in</span></span><br><span class="line">           itertools.chain(</span><br><span class="line">               *(super_cls.__dict__.items() <span class="keyword">for</span> super_cls <span class="keyword">in</span> cls.__mro__[:-<span class="number">2</span>])</span><br><span class="line">           )    <span class="comment"># å½“å‰ç±»åˆ°ABCï¼ˆä¸åŒ…æ‹¬ï¼‰çš„æ‰€æœ‰å±æ€§</span></span><br><span class="line">           <span class="keyword">if</span> <span class="built_in">hasattr</span>(attr, <span class="string">&quot;__abstract__&quot;</span>)</span><br><span class="line">       ):</span><br><span class="line">           <span class="keyword">raise</span> TypeError(<span class="string">&quot;æŠ½è±¡ç±»æœ‰æœªå®ç°çš„æ–¹æ³•ï¼&quot;</span>)</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">super</span>().__call__(*args, **kwargs)</span><br></pre></td></tr></table></figure></blockquote>
</li>
<li>ç”¨ä¸€äº›æ‰‹æ®µä½¿å¾—ç”¨æˆ·åœ¨ä¸çŸ¥é“çš„æƒ…å†µä¸‹å°†å…ƒç±»è®¾ç½®ä¸º<code>ABCMeta</code>ã€‚ç›¸æ¯”äºæŒ‚åœ¨ç±»ä¸Šçš„è£…é¥°å™¨ï¼Œå…ƒç±»ä¼šè¢«ç»§æ‰¿ï¼Œæ‰€ä»¥å¯ä»¥åˆ›å»ºä¸€ä¸ªç©ºçš„ç±»å¹¶è®¾ç½®å…¶å…ƒç±»å±æ€§ï¼Œç”¨æˆ·åœ¨ä½¿ç”¨æ—¶åªéœ€è¦ç»§æ‰¿ä¸è¿™ä¸ªç©ºç±»å³å¯<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractBaseClass</span>(metaclass=AbstractBaseClassMeta):</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure></blockquote>
</li>
</ol>
<p>ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦å°†çˆ¶ç±»æ–¹æ³•æ ‡è®°ä¸Š<code>@abstractmethod</code>ç„¶åå­ç±»é‡å†™çš„æ—¶å€™æŠŠ<code>__abstract__</code>å±æ€§é¡¶æ›¿æ‰å°±å¯ä»¥äº†</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Abstract</span>(<span class="title class_ inherited__">AbstractBaseClass</span>):</span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">self</span>): ...</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Concrete</span>(<span class="title class_ inherited__">Abstract</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AlsoAbstract</span>(<span class="title class_ inherited__">Abstract</span>): ...</span><br><span class="line">        </span><br><span class="line">Concrete().greet()    <span class="comment"># hello</span></span><br><span class="line">Abstract()    <span class="comment"># TypeError</span></span><br><span class="line">AlsoAbstract()    <span class="comment"># TypeError</span></span><br></pre></td></tr></table></figure>

<h2 id="Pythonï¼Œä½†æ˜¯å¯ä»¥æ–¹æ³•é‡è½½"><a href="#Pythonï¼Œä½†æ˜¯å¯ä»¥æ–¹æ³•é‡è½½" class="headerlink" title="Pythonï¼Œä½†æ˜¯å¯ä»¥æ–¹æ³•é‡è½½"></a>Pythonï¼Œä½†æ˜¯å¯ä»¥æ–¹æ³•é‡è½½</h2><blockquote>
<p>ä»£ç æ¥è‡ª<a target="_blank" rel="noopener" href="https://github.com/mCodingLLC/VideosSampleCode/blob/master/videos/077_metaclasses_in_python/overloading.py">è¿™ä¸ªrepo</a>ï¼Œä»¥ MIT åè®®å¼€æº</p>
</blockquote>
<p>å…ˆæ¥çœ‹çœ‹æ•ˆæœï¼Œé€šè¿‡å…ƒç±»ä½¿å¾—åŒåæ–¹æ³•å¯ä»¥æœ‰ä¸åŒçš„å‚æ•°ç±»å‹æˆ–è€…å‚æ•°åˆ—è¡¨ï¼Œå³ä½¿æœ‰ç»§æ‰¿å…³ç³»ä¹Ÿå¯ä»¥å®Œç¾å…¼å®¹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">Overload</span>):</span><br><span class="line"><span class="meta">    @overload</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self, x: <span class="built_in">int</span></span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A.f æ•´å½¢é‡è½½&quot;</span>, self, x)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @overload</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self, x: <span class="built_in">str</span></span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A.f å­—ç¬¦ä¸²é‡è½½&quot;</span>, self, x)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @overload</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self, x, y</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A.f ä¸¤å‚æ•°é‡è½½&quot;</span>, self, x, y)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line"><span class="meta">    @overload</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;B.f æ— å‚é‡è½½&quot;</span>, self)</span><br><span class="line"></span><br><span class="line">a, b = A(), B()</span><br><span class="line"></span><br><span class="line">b.f(<span class="number">1</span>, <span class="number">2</span>)    <span class="comment"># A.f ä¸¤å‚æ•°é‡è½½</span></span><br><span class="line">b.f(<span class="number">1</span>)    <span class="comment"># A.f æ•´å½¢é‡è½½</span></span><br><span class="line">b.f(<span class="string">&quot;str&quot;</span>)    <span class="comment"># A.f å­—ç¬¦ä¸²é‡è½½</span></span><br><span class="line">b.f()    <span class="comment"># B.f æ— å‚é‡è½½</span></span><br></pre></td></tr></table></figure>

<h3 id="ç‹¸çŒ«æ¢å¤ªå­ä¹‹-prepare-è¿”å›OverloadDict"><a href="#ç‹¸çŒ«æ¢å¤ªå­ä¹‹-prepare-è¿”å›OverloadDict" class="headerlink" title="ç‹¸çŒ«æ¢å¤ªå­ä¹‹__prepare__è¿”å›OverloadDict"></a>ç‹¸çŒ«æ¢å¤ªå­ä¹‹<code>__prepare__</code>è¿”å›<code>OverloadDict</code></h3><p>ä¸Šé¢è¯´åˆ°äº†<code>type.__prepare__</code>æ°¸è¿œä¼šè¿”å›ä¸€ä¸ªç©ºå­—å…¸ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªå­—å…¸ä½œä¸º<code>locals</code>è¿è¡Œç±»å®šä¹‰å†…çš„ä»£ç ï¼Œè·å–åˆ°è¿™ä¸ª<code>namespace</code>å­—å…¸ï¼Œæœ€ååœ¨ä¼ ç»™<code>type.__new__</code>å®Œæˆç±»çš„åˆ›å»ºã€‚<code>OverloadMeta</code>å°†é‡å†™è¿™ä¸ª<code>__prepare__</code>æ–¹æ³•å¹¶è¿”å›ä¸€ä¸ª<code>OverloadDict</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">OverloadMeta</span>(<span class="title class_ inherited__">type</span>):</span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__prepare__</span>(<span class="params">mcs, name, bases</span>):</span><br><span class="line">        <span class="keyword">return</span> OverloadDict()</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">mcs, name, bases, namespace, **kwargs</span>):    <span class="comment"># ä¸æ˜¯æœ€ç»ˆä»£ç </span></span><br><span class="line">        <span class="built_in">print</span>(namespace)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>().__new__(mcs, name, bases, namespace, **kwargs)</span><br></pre></td></tr></table></figure>
<p>è€Œè¿™ä¸ª<code>OverloadDict</code>çš„ä»»åŠ¡ï¼Œå°±æ˜¯ä¿è¯ç›¸åŒåå­—çš„æ–¹æ³•åœ¨è¢«æ”¾è¿›è¿™ä¸ªå­—å…¸é‡Œçš„æ—¶å€™ä¸ä¼šå°†ä¸Šä¸€ä¸ªé¡¶æ‰ï¼Œæ‰€ä»¥é‡å†™<code>__setitem__</code>æ–¹æ³•ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">OverloadList</span>(<span class="title class_ inherited__">list</span>):</span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OverloadDict</span>(<span class="title class_ inherited__">dict</span>):</span><br><span class="line">    __MISSING = <span class="built_in">object</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__setitem__</span>(<span class="params">self, key, value</span>):</span><br><span class="line">        <span class="keyword">assert</span> <span class="built_in">isinstance</span>(key, <span class="built_in">str</span>), <span class="string">&quot;keys must be str&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å…ˆæ£€æŸ¥è‡ªå·±æœ‰æ²¡æœ‰å­˜è¿‡ä¸€æ¨¡ä¸€æ ·çš„ä¸œè¥¿ï¼Œå› ä¸º None æ˜¯åˆæ³•å€¼ (æ¯”å¦‚åœ¨ç±»é‡Œå†™ x = None) </span></span><br><span class="line">        prior_val = self.get(key, self.__MISSING)     </span><br><span class="line">        overloaded = <span class="built_in">getattr</span>(value, <span class="string">&quot;__overload__&quot;</span>, <span class="literal">False</span>)  <span class="comment"># æ£€æŸ¥å‡½æ•°æ˜¯ä¸æ˜¯è¢«æ ‡è®°ä¸ºé‡è½½</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> prior_val <span class="keyword">is</span> self.__MISSING:   <span class="comment"># å¦‚æœå­—å…¸å†…æ²¡æœ‰è®°å½•è¿‡ç›¸åŒçš„æ–¹æ³•</span></span><br><span class="line">            <span class="comment"># å¦‚æœè¢«æ ‡è®°ä¸º overload åˆ™æ–°å»ºä¸€ä¸ª OverloadList ç„¶åä¸¢åˆ°å­—å…¸é‡Œå»</span></span><br><span class="line">            insert_val = OverloadList([value]) <span class="keyword">if</span> overloaded <span class="keyword">else</span> value</span><br><span class="line">            <span class="built_in">super</span>().__setitem__(key, insert_val)</span><br><span class="line">            </span><br><span class="line">        <span class="comment"># å¦‚æœä¸ä½¿ç”¨ OverloadList å°±åˆ†ä¸æ¸…æ˜¯å­˜äº†ä¸¤æ¬¡åˆ—è¡¨ (x = []; x = [1, 2]) è¿˜æ˜¯çœŸçš„é‡è½½äº†</span></span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">isinstance</span>(prior_val, OverloadList):    </span><br><span class="line">            <span class="comment"># å¦‚æœå­˜è¿‡ä¸€æ¨¡ä¸€æ ·çš„ä¸œè¥¿ï¼Œè€Œä¸”ä¹Ÿè¢«æ ‡è®°ä¸º overloadï¼Œé‚£ä¹ˆå°±å¾€ OverloadList é‡Œæ·»åŠ è¿™ä¸ªå¯¹è±¡</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> overloaded:</span><br><span class="line">                <span class="keyword">raise</span> ValueError(self._errmsg(key))     <span class="comment"># å‰åä¸ä¸€è‡´â€”â€”æœ‰çš„æ˜¯é‡è½½æœ‰çš„ä¸æ˜¯</span></span><br><span class="line">            prior_val.append(value)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> overloaded:</span><br><span class="line">                <span class="keyword">raise</span> ValueError(self._errmsg(key))     <span class="comment"># å‰åä¸ä¸€è‡´â€”â€”æœ‰çš„æ˜¯é‡è½½æœ‰çš„ä¸æ˜¯</span></span><br><span class="line">            <span class="built_in">super</span>().__setitem__(key, value)     <span class="comment"># åˆ»æ„çš„è¦†ç›– (x = 1; x = 2)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_errmsg</span>(<span class="params">key</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&#x27;éƒ¨åˆ†æ–¹æ³•é‡è½½éƒ¨åˆ†æ²¡æœ‰ï¼Œéœ€è¦æ‰€æœ‰æ–¹æ³•éƒ½æ ‡è®°ä¸º @overload: <span class="subst">&#123;key&#125;</span>&#x27;</span></span><br></pre></td></tr></table></figure>
<p><code>OverloadList</code>çš„ä½œç”¨å°±æ˜¯ä¸ºäº†åŒºåˆ†åˆ°åº•æ˜¯å‡½æ•°é‡è½½è¿˜æ˜¯åˆ»æ„çš„åˆ—è¡¨é‡å¤å®šä¹‰ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(metaclass=OverloadMeta):    <span class="comment"># ç°åœ¨è¿™ä¸ªå…ƒç±»è¿˜ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œåªæ˜¯ä¸€ä¸ªä¾‹å­</span></span><br><span class="line">    x = []</span><br><span class="line">    x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå­˜å‚¨é‡è½½çš„æ–¹æ³•ä¸ä½¿ç”¨<code>OverloadList</code>è€Œå…¨éƒ¨ç”¨<code>list</code> (å°†æ‰€æœ‰<code>OverloadList</code>æ¢æˆ<code>list</code>)ï¼Œå°±ä¼šå‡ºbugï¼š</p>
<ol>
<li><code>OverloadDict</code>æ²¡æœ‰å­˜è¿‡åå«<code>x</code>çš„å˜é‡ï¼Œå°†<code>x</code>å’Œç©ºåˆ—è¡¨å­˜åˆ°å­—å…¸é‡Œ</li>
<li>å½“è¿è¡Œåˆ°<code>x = [1, 2, 3]</code>æ—¶ï¼Œ<code>OverloadDict</code>åœ¨ç¬¬ä¸ƒè¡Œæ‹¿åˆ°ç©ºåˆ—è¡¨ï¼Œè€Œç¬¬åä¸ƒè¡Œçš„<code>elif isinstance(prior_val, list)</code>ä¼šè¢«åˆ¤å®šä¸º<code>True</code></li>
<li>å› ä¸º<code>[1, 2, 3]</code>è¿™ä¸ªåˆ—è¡¨æ²¡æœ‰<code>__overload__</code>å±æ€§ï¼Œæ‰€ä»¥ä¼šåœ¨ç¬¬äºŒåè¡ŒæŠ¥é”™ï¼Œå‰åä¸ä¸€è‡´</li>
</ol>
<p>åœ¨<code>OverloadMeta.__new__</code>å¼€å§‹ä¹‹å‰è¿™ä¸ª<code>OverloadDict</code>å°±å·²ç»æœ‰äº†è¯¥æœ‰çš„å±æ€§ï¼Œä»¥ä¸Šé¢çš„<code>A</code>ç±»ä¸ºä¾‹å­ï¼Œ<code>OverloadMeta.__new__</code>æ‰“å°å‡ºæ¥çš„å‘½åç©ºé—´ä¸ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &#x27;__module__&#x27;: &#x27;__main__&#x27;,</span><br><span class="line">    &#x27;__qualname__&#x27;: &#x27;A&#x27;, </span><br><span class="line">    &#x27;f&#x27;: [&lt;function A.f at 0x0000012B8D29B5B0&gt;, &lt;function A.f at 0x0000012B8D29B640&gt;, &lt;function A.f at 0x0000012B8D29B6D0&gt;]</span><br><span class="line">    è¿™é‡Œçš„ f ä»ç„¶æ˜¯ OverloadListï¼Œåªæ˜¯æ²¡æœ‰é‡å†™ list çš„ __repr__ æ–¹æ³•</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åˆ—è¡¨å˜æ–¹æ³•ï¼Œæè¿°å™¨æ˜¾ç¥åŠŸ"><a href="#åˆ—è¡¨å˜æ–¹æ³•ï¼Œæè¿°å™¨æ˜¾ç¥åŠŸ" class="headerlink" title="åˆ—è¡¨å˜æ–¹æ³•ï¼Œæè¿°å™¨æ˜¾ç¥åŠŸ"></a>åˆ—è¡¨å˜æ–¹æ³•ï¼Œæè¿°å™¨æ˜¾ç¥åŠŸ</h3><p>å¦‚æœåœ¨<code>OverloadMeta.__new__</code>é‡Œç›´æ¥è°ƒç”¨<code>type.__new__</code>ï¼Œç”Ÿäº§å‡ºæ¥çš„ç±»ï¼Œæ¯”å¦‚<code>A</code>ç±»ï¼Œåœ¨è·å–<code>f</code>æ–¹æ³•çš„æ—¶å€™æ‹¿åˆ°çš„å°†ä¼šæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = A()</span><br><span class="line"><span class="built_in">print</span>(a.f)    <span class="comment"># [&lt;function A.f at ...&gt;, &lt;function A.f at ...&gt;, &lt;function A.f at ...&gt;]</span></span><br><span class="line">a.f(<span class="number">1</span>, <span class="number">2</span>)   <span class="comment"># TypeError: OverloadList object is not callable</span></span><br></pre></td></tr></table></figure>
<p><strong>æˆ‘ä»¬æƒ³è¦ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨å®ä¾‹<code>a</code>è°ƒç”¨è¢«é‡è½½çš„æ–¹æ³•æ—¶ï¼Œå°†æ‹¿åˆ°ä¸€ä¸ªæ–¹æ³•è€Œéä¸€ä¸ªé‡è½½åˆ—è¡¨ã€‚</strong><br>è¿™ç§æƒ…å†µä¸‹ï¼Œ<a href="/2022/11/21/Python-%E6%8F%8F%E8%BF%B0%E5%99%A8%E6%B7%B1%E5%85%A5%E7%AE%80%E5%87%BA"><strong>æè¿°å™¨ (descriptor)</strong></a> å°†éå¸¸æœ‰ç”¨ã€‚ä¸€ä¸ªç±»åªè¦å®šä¹‰äº†<code>__get__</code>, <code>__set__</code>, <code>__delete__</code>ä¸­ä»»æ„ä¸€ä¸ªæ–¹æ³•å°±è¢«å«åšæè¿°å™¨ï¼Œä¸‹é¢æœ‰ä¸€ä¸ªå¾ˆç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Desc</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__get__</span>(<span class="params">self, instance, owner</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;GET: <span class="subst">&#123;instance=&#125;</span>, <span class="subst">&#123;owner=&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>:</span><br><span class="line">    desc = Desc()</span><br><span class="line"></span><br><span class="line">c = C()</span><br><span class="line"><span class="built_in">print</span>(c.desc)    <span class="comment"># GET: instance=&lt;__main__.C object at 0x000002282914FEE0&gt;, owner=&lt;class &#x27;__main__.C&#x27;&gt;</span></span><br><span class="line">                 <span class="comment"># 5</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹è§ï¼Œè¢«æ”¾ç½®åœ¨ç±»ä½“å†…çš„æè¿°å™¨åœ¨è¢«è·å–æ—¶å°†è°ƒç”¨å¯¹åº”çš„<code>__get__</code>æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦çš„å°±æ˜¯è¿™ä¸€ç‚¹ï¼Œåœ¨åš<code>a.f</code>çš„æ—¶å€™æ·»åŠ é€»è¾‘ï¼Œè¿”å›æ­£ç¡®çš„å¯¹è±¡ã€‚<br>å…ˆæŠŠæ‰€æœ‰çš„<code>OverloadList</code>åœ¨<code>__new__</code>é‡Œè½¬æˆ<code>OverloadDesc</code>ï¼Œå¹¶æŠŠä¿®æ”¹è¿‡çš„å‘½åç©ºé—´ä¼ ç»™<code>type.__new__</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">OverloadMeta</span>(<span class="title class_ inherited__">type</span>):</span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__prepare__</span>(<span class="params">mcs, name, bases</span>):</span><br><span class="line">        <span class="keyword">return</span> OverloadDict()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">mcs, name, bases, namespace, **kwargs</span>):</span><br><span class="line">        overload_namespace = &#123;</span><br><span class="line">            key: OverloadDesc(val) <span class="keyword">if</span> <span class="built_in">isinstance</span>(val, OverloadList) <span class="keyword">else</span> val</span><br><span class="line">            <span class="keyword">for</span> key, val <span class="keyword">in</span> namespace.items()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>().__new__(mcs, name, bases, overload_namespace, **kwargs)</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æ¥çœ‹çœ‹è¿™ä¸ª<code>OverloadDesc</code>æè¿°å™¨å¹²äº†ä»€ä¹ˆï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">OverloadDesc</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__set_name__</span>(<span class="params">self, owner, name</span>):</span><br><span class="line">        self.owner = owner  <span class="comment"># åœ¨å“ªä¸ªç±»ä¸‹ï¼Œæ¯”å¦‚ &lt;class &#x27;__main__.A&#x27;&gt;</span></span><br><span class="line">        self.name = name    <span class="comment"># æ–¹æ³•çš„åå­—ï¼Œæ¯”å¦‚ f</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, overload_list</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(overload_list, OverloadList):</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">&quot;å¿…é¡»æ˜¯é‡è½½åˆ—è¡¨&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> overload_list:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;ç©ºçš„é‡è½½åˆ—è¡¨&quot;</span>)</span><br><span class="line">        self.overload_list = overload_list</span><br><span class="line">        self.signatures = [inspect.signature(f) <span class="keyword">for</span> f <span class="keyword">in</span> overload_list]     <span class="comment"># è·å–æ¯ä¸ªæ–¹æ³•çš„ signature</span></span><br><span class="line">        <span class="comment"># æ¯”å¦‚ï¼š[&lt;Signature (self, x: int)&gt;, &lt;Signature (self, x: str)&gt;, &lt;Signature (self, x, y)&gt;]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;self.__class__.__qualname__&#125;</span>(<span class="subst">&#123;self.overload_list!r&#125;</span>)&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__get__</span>(<span class="params">self, instance=<span class="literal">None</span>, _owner=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="keyword">if</span> instance <span class="keyword">is</span> <span class="literal">None</span>:    <span class="comment"># å¦‚æœæ˜¯ç›´æ¥ A.f è€Œä¸æ˜¯ a.f å°±è¿”å›è‡ªå·±</span></span><br><span class="line">            <span class="keyword">return</span> self</span><br><span class="line">        <span class="comment"># è¦ä¸ç„¶å°±è¿”å›ä¸€ä¸ªçŸ¥é“æ‰€æœ‰ä¿¡æ¯çš„ç±»</span></span><br><span class="line">        <span class="keyword">return</span> BoundOverloadDispatcher(instance, self.owner, self.name, self.overload_list, self.signatures)</span><br></pre></td></tr></table></figure>
<p>æœ€é‡è¦çš„æ—¶æœ€åä¸€è¡Œè¿”å›çš„<code>BoundOverloadDispatcher</code>ï¼Œå¦‚æœè°ƒç”¨<code>a.f(1)</code>ï¼Œé¦–å…ˆä¼šå…ˆè·å–åˆ°<code>a.f</code>ï¼Œç„¶åå†è°ƒç”¨å¯¹åº”çš„<code>__call__</code>æ–¹æ³•ã€‚æè¿°å™¨åªèƒ½å¸®æˆ‘ä»¬åˆ°è·å–<code>a.f</code>ï¼Œç”±äºåªæœ‰è°ƒç”¨çš„æ—¶å€™æœ‰å‚æ•°åˆ—è¡¨è€Œè·å–æ—¶æ²¡æœ‰ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªç±»ä¸“é—¨æ ¹æ®<code>__call__</code>ä¼ è¿›æ¥çš„å‚æ•°åˆ—è¡¨è°ƒç”¨ä¸åŒçš„é‡è½½æ–¹æ³•ï¼Œè€Œè¿™ä¸ªç±»å°±æ˜¯<code>BoundOverloadDispatcher</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NoMatchingOverload</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BoundOverloadDispatcher</span>:</span><br><span class="line">    __MISSING = <span class="built_in">object</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, instance, owner_cls, name, overload_list, signatures</span>):</span><br><span class="line">        self.instance = instance    <span class="comment"># æ–¹æ³•çš„ç¬¬ä¸€ä¸ª self å‚æ•°</span></span><br><span class="line">        self.owner_cls = owner_cls</span><br><span class="line">        self.name = name</span><br><span class="line">        self.overload_list = overload_list</span><br><span class="line">        self.signatures: <span class="built_in">list</span>[inspect.Signature] = signatures</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">best_match</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">for</span> f, sig <span class="keyword">in</span> <span class="built_in">zip</span>(self.overload_list, self.signatures):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                bound_func = sig.bind(self.instance, *args, **kwargs)    <span class="comment"># å‚æ•°åˆ—è¡¨èƒ½ä¸èƒ½å¯¹çš„ä¸Š</span></span><br><span class="line">            <span class="keyword">except</span> TypeError:   <span class="comment"># å¦‚æœå‚æ•°åˆ—è¡¨éƒ½ä¸å¯¹é‚£å°±å¯»æ‰¾ä¸‹ä¸€ä¸ª</span></span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                bound_func.apply_defaults()     <span class="comment"># å°†é»˜è®¤å‚æ•°è¡¥é½</span></span><br><span class="line">                <span class="keyword">if</span> _signature_matches(sig, bound_func):     <span class="comment"># å¦‚æœç±»å‹æç¤ºä¹Ÿé€šè¿‡äº†é‚£å°±æ˜¯è¿™ä¸ª</span></span><br><span class="line">                    <span class="keyword">return</span> f</span><br><span class="line">        <span class="keyword">raise</span> NoMatchingOverload()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            f = self.best_match(*args, **kwargs)</span><br><span class="line">        <span class="keyword">except</span> NoMatchingOverload:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> f(self.instance, *args, **kwargs)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ²¡æœ‰åŒ¹é…çš„ï¼ŒæŸ¥æ‰¾çˆ¶ç±»</span></span><br><span class="line">        super_ins = <span class="built_in">super</span>(self.owner_cls, self.instance)</span><br><span class="line">        <span class="comment"># è·å–çˆ¶ç±»åŒåæ–¹æ³•ï¼ˆå®é™…ä¸Šæ˜¯BoundOverloadDispatcherï¼‰</span></span><br><span class="line">        super_call = <span class="built_in">getattr</span>(super_ins, self.name, self.__MISSING)</span><br><span class="line">        <span class="keyword">if</span> super_call <span class="keyword">is</span> <span class="keyword">not</span> self.__MISSING:</span><br><span class="line">            <span class="keyword">return</span> super_call(*args, **kwargs)    <span class="comment"># é€’å½’å¾€çˆ¶ç±»æ‰¾</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> NoMatchingOverload()</span><br></pre></td></tr></table></figure>
<p>ç¬¬22è¡Œçš„<code>_signature_matches</code>æ£€æŸ¥äº†ç±»å‹æç¤ºå’Œä¼ è¿›æ¥çš„å‚æ•°æ˜¯å¦ä¸€è‡´ï¼Œå€¼å¾—ä¸€æçš„æ˜¯<code>isinstance(obj, Union[str, int])</code>ä¹‹ç±»çš„éƒ½å¯ä»¥æ­£å¸¸çš„åˆ¤æ–­ï¼Œå”¯ç‹¬å°±æ˜¯<code>list[int]</code>è¿™ç§ä¸è¡Œï¼Œå› ä¸º<code>isinstance</code>ä¸æ”¯æŒæ³›å‹ç±»å‹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">_signature_matches</span>(<span class="params">signature: inspect.Signature, bound_args: inspect.BoundArguments</span>):</span><br><span class="line">    <span class="keyword">for</span> name, arg <span class="keyword">in</span> bound_args.arguments.items():</span><br><span class="line">        param = signature.parameters[name]</span><br><span class="line">        hint = param.annotation</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> _typehint_matches(arg, hint):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_typehint_matches</span>(<span class="params">obj, hint</span>):</span><br><span class="line">    <span class="keyword">return</span> hint <span class="keyword">is</span> inspect.Parameter.empty <span class="keyword">or</span> <span class="built_in">isinstance</span>(obj, hint)</span><br></pre></td></tr></table></figure>

<h3 id="è£…é¥°å™¨å’Œç©ºç±»"><a href="#è£…é¥°å™¨å’Œç©ºç±»" class="headerlink" title="è£…é¥°å™¨å’Œç©ºç±»"></a>è£…é¥°å™¨å’Œç©ºç±»</h3><p>åˆ°è¿™é‡Œæ‰€æœ‰çš„é€»è¾‘éƒ½å·²ç»å®Œæˆäº†ï¼Œä¸ºäº†ç”¨æˆ·çš„ä½¿ç”¨ç®€ä¾¿åº¦ï¼Œåˆ›å»ºä¸€ä¸ª<code>@overload</code>è£…é¥°å™¨å’Œ<code>Overload</code>ç”¨æ¥ç»§æ‰¿ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">overload</span>(<span class="params">f</span>):</span><br><span class="line">    f.__overload__ = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> f</span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Overload</span>(metaclass=OverloadMeta):</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<h3 id="é‡è½½çš„å·¥ä½œæµç¨‹"><a href="#é‡è½½çš„å·¥ä½œæµç¨‹" class="headerlink" title="é‡è½½çš„å·¥ä½œæµç¨‹"></a>é‡è½½çš„å·¥ä½œæµç¨‹</h3><p>å‰é¢è®²äº†è¿™ä¹ˆå¤šä»£ç ï¼Œè¿™ä¸€èŠ‚æˆ‘æ¥æ¢³ç†ä¸€ä¸‹ä¸ºä»€ä¹ˆ<code>A</code>ç±»å¯ä»¥é‡è½½ã€‚ä¸ºäº†æ–¹ä¾¿æˆ‘å†æŠŠä»£ç æ”¾åœ¨è¿™é‡Œï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">Overload</span>):</span><br><span class="line"><span class="meta">    @overload</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self, x: <span class="built_in">int</span></span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A.f æ•´å½¢é‡è½½&quot;</span>, self, x)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @overload</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self, x: <span class="built_in">str</span></span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A.f å­—ç¬¦ä¸²é‡è½½&quot;</span>, self, x)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @overload</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self, x, y</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A.f ä¸¤å‚æ•°é‡è½½&quot;</span>, self, x, y)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line"><span class="meta">    @overload</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;B.f æ— å‚é‡è½½&quot;</span>, self)</span><br></pre></td></tr></table></figure>
<ul>
<li>ç±»çš„åˆ›å»º<ol>
<li><code>A</code>ç±»ç»§æ‰¿äº<code>Overload</code>ç±»ï¼Œè€Œ<code>Overload</code>è®¾ç½®äº†å…ƒç±»ä¸º<code>OverloadMeta</code>ï¼Œä¹Ÿå°±æ˜¯è¯´<code>A</code>ç±»æ˜¯ç”±<code>OverloadMeta</code>åˆ›å»ºçš„ç±»ã€‚</li>
<li>é¦–å…ˆåœ¨<code>OverloadMeta.__prepare__</code>é‡Œè¿”å›äº†ä¸€ä¸ªç‰¹åˆ¶çš„<code>OverloadDict</code>å¯¹è±¡ï¼Œå…¶ä½œç”¨å°±æ˜¯å°†é‡è½½çš„åŒåå±æ€§éƒ½ä¸¢åˆ°<code>OverloadList</code>å¯¹è±¡é‡Œå»ã€‚</li>
<li>åœ¨<code>__prepare__</code>ä¸<code>__new__</code>ä¹‹é—´è¿è¡Œäº†<code>A</code>ç±»å®šä¹‰å†…éƒ¨çš„ä»£ç ï¼Œæ‰€æœ‰çš„å±€éƒ¨å˜é‡éƒ½è¢«ä¿å­˜åˆ°<code>OverloadDict</code>å¯¹è±¡é‡Œï¼Œä¹Ÿå°±æ˜¯å‘½åç©ºé—´ã€‚</li>
<li>å‘½åç©ºé—´è¢«ä¼ è¿›<code>OverloadMeta.__new__</code>é‡Œï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œå°†å‘½åç©ºé—´å­—å…¸é‡Œæ‰€æœ‰çš„<code>OverloadList</code>éƒ½å¥—ä¸Š<code>OverloadDesc</code>ï¼Œå˜æˆæè¿°å™¨ã€‚</li>
<li>æŠŠå‚æ•°äº¤ç»™<code>type.__new__</code></li>
</ol>
</li>
<li>è·å–æ–¹æ³•å¹¶è°ƒç”¨<ol>
<li>è‹¥ä½¿ç”¨<code>A.f</code>åˆ™è¿”å›å¯¹åº”çš„æè¿°å™¨ï¼Œå¦‚æ˜¯å¯¹è±¡è·å–å±æ€§(<code>a.f</code>)åˆ™è¿”å›ä¸€ä¸ª<code>BoundOverloadDispatcher</code>ï¼Œå› ä¸ºæè¿°å™¨åªèƒ½ç®¡åˆ°å±æ€§è·å–ï¼Œç®¡ä¸åˆ°è°ƒç”¨è¿™ä¸ªå±æ€§ï¼Œå› è€Œéœ€è¦è¿™ä¸ªç±»ä¸“é—¨æ ¹æ®å‚æ•°ç±»å‹è°ƒç”¨å¯¹åº”çš„æ–¹æ³•ã€‚</li>
<li>åœ¨<code>BoundOverloadDispatcher</code>è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šå°è¯•åœ¨è°ƒç”¨è€…çš„ç±»ä¸Šæ‰¾å¯¹åº”äº†å‚æ•°åˆ—è¡¨å’Œå‚æ•°ç±»å‹çš„æ–¹æ³•å¹¶è°ƒç”¨ã€‚å¦‚æœå½“å‰ç±»æ‰¾ä¸åˆ°ï¼Œåˆ™ä¼šç”¨é€’å½’çš„æ–¹å¼å‘çˆ¶ç±»å¯»æ‰¾ã€‚</li>
<li><code>_typehint_matches</code>ä½¿ç”¨äº†<code>isinstance</code>ï¼Œæ‰€ä»¥ä¸æ˜¯æ‰€æœ‰æ³¨é‡Šéƒ½å¯ä»¥è¿è¡Œã€‚</li>
</ol>
</li>
</ul>
<h2 id="æˆ‘çš„çˆ¶ç±»æ˜¯æˆ‘çš„å…ƒç±»"><a href="#æˆ‘çš„çˆ¶ç±»æ˜¯æˆ‘çš„å…ƒç±»" class="headerlink" title="æˆ‘çš„çˆ¶ç±»æ˜¯æˆ‘çš„å…ƒç±»"></a>æˆ‘çš„çˆ¶ç±»æ˜¯æˆ‘çš„å…ƒç±»</h2><p>ä»<code>type</code>åˆ°æ™®é€šç±»çš„å®ä¾‹ä¸ä¸€å®šåªæœ‰3æˆ–4å±‚å…³ç³»ï¼Œä¸€ä¸ªå…ƒç±»åŒæ ·å¯ä»¥ç”Ÿäº§å…ƒç±»ï¼Œç”šè‡³ä¸€ä¸ªå…ƒç±»çš„çˆ¶ç±»å’Œå…¶å…ƒç±»å¯ä»¥æ˜¯åŒä¸€ä¸ªï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Meta1</span>(<span class="title class_ inherited__">type</span>): ...</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Meta2</span>(Meta1, metaclass=Meta1):</span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rev</span>(<span class="params">mcs</span>):</span><br><span class="line">        <span class="built_in">print</span>(mcs.__bases__[<span class="number">0</span>] <span class="keyword">is</span> <span class="built_in">type</span>(mcs))    <span class="comment"># çˆ¶ç±»å’Œå…ƒç±»æ˜¯ä¸æ˜¯åŒä¸€ä¸ªï¼Ÿ</span></span><br><span class="line"></span><br><span class="line">Meta2.rev()    <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<p>è€Œè¿™ä¹Ÿå°±ä»£è¡¨ç€åµŒå¥—å››æ¬¡<code>type</code>å¹¶ä¸ä¸€å®šä¼šé‡å¤ä¸º<code>type</code>ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Meta1</span>(<span class="title class_ inherited__">type</span>): ...</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Meta2</span>(Meta1, metaclass=Meta1): ...</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Meta3</span>(Meta2, metaclass=Meta2): ...</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Meta4</span>(Meta3, metaclass=Meta3): ...</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Meta5</span>(Meta4, metaclass=Meta4): ...</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(metaclass=Meta5): ...</span><br><span class="line">a = A()</span><br><span class="line"><span class="built_in">type</span>(a)    <span class="comment"># &lt;class &#x27;__main__.A&#x27;&gt;</span></span><br><span class="line"><span class="built_in">type</span>(<span class="built_in">type</span>(a))    <span class="comment"># &lt;class &#x27;__main__.Meta5&#x27;&gt;</span></span><br><span class="line"><span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(a)))    <span class="comment"># &lt;class &#x27;__main__.Meta4&#x27;&gt;</span></span><br><span class="line"><span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(a))))    <span class="comment"># &lt;class &#x27;__main__.Meta3&#x27;&gt;</span></span><br><span class="line"><span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(a)))))    <span class="comment"># &lt;class &#x27;__main__.Meta2&#x27;&gt;</span></span><br><span class="line"><span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(a))))))    <span class="comment"># &lt;class &#x27;__main__.Meta1&#x27;&gt;</span></span><br><span class="line"><span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(a)))))))    <span class="comment"># &lt;class &#x27;type&#x27;&gt;</span></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://www.fdxblog.tk">Fed_Dragon</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://www.fdxblog.tk/2022/11/18/Python-Metaclass%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/">https://www.fdxblog.tk/2022/11/18/Python-Metaclass%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://www.fdxblog.tk" target="_blank">FdxCauponağŸ</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python/">Python</a><a class="post-meta__tags" href="/tags/%E6%8F%8F%E8%BF%B0%E5%99%A8/">æè¿°å™¨</a><a class="post-meta__tags" href="/tags/%E5%85%83%E7%B1%BB/">å…ƒç±»</a></div><div class="post_share"><div class="social-share" data-image="/img/cover6.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2022/11/21/Python-%E6%8F%8F%E8%BF%B0%E5%99%A8%E6%B7%B1%E5%85%A5%E7%AE%80%E5%87%BA/"><img class="prev-cover" src="/img/cover1.webp" onerror="onerror=null;src='/img/default_cover.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Python æè¿°å™¨æ·±å…¥ç®€å‡º</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2022/11/21/Python-%E6%8F%8F%E8%BF%B0%E5%99%A8%E6%B7%B1%E5%85%A5%E7%AE%80%E5%87%BA/" title="Python æè¿°å™¨æ·±å…¥ç®€å‡º"><img class="cover" src="/img/cover1.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-21</div><div class="title">Python æè¿°å™¨æ·±å…¥ç®€å‡º</div></div></a></div><div><a href="/2022/12/09/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AF%B4functools%E5%8C%85%E6%98%AF%E7%A5%9E/" title="ä¸ºä»€ä¹ˆè¯´functoolsåŒ…æ˜¯ç¥"><img class="cover" src="/img/cover2.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-09</div><div class="title">ä¸ºä»€ä¹ˆè¯´functoolsåŒ…æ˜¯ç¥</div></div></a></div><div><a href="/2022/12/03/Python-def%E5%85%B3%E9%94%AE%E5%AD%97%E7%AB%9F%E7%84%B6%E6%98%AF%E8%AF%AD%E6%B3%95%E7%B3%96%EF%BC%9FCode-Object%E8%AF%A6%E8%A7%A3/" title="Python defå…³é”®å­—ç«Ÿç„¶æ˜¯è¯­æ³•ç³–ï¼ŸCode Objectè¯¦è§£"><img class="cover" src="/img/cover7.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-03</div><div class="title">Python defå…³é”®å­—ç«Ÿç„¶æ˜¯è¯­æ³•ç³–ï¼ŸCode Objectè¯¦è§£</div></div></a></div><div><a href="/2022/11/28/Python-%E8%A3%85%E9%A5%B0%E5%99%A8%E8%AF%A6%E8%A7%A3/" title="Python è£…é¥°å™¨è¯¦è§£"><img class="cover" src="/img/cover1.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-28</div><div class="title">Python è£…é¥°å™¨è¯¦è§£</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Fed_Dragon</div><div class="author-info__description">ä¸€äº›Pythonçš„å°æŠ€å·§å’Œæ•´æ´»</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">5</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://space.bilibili.com/509754182"><i class="fa-brands fa-bilibili"></i><span>å…³æ³¨æˆ‘ï¼</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/FedDragon1" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://space.bilibili.com/509754182" target="_blank" title="Bilibili"><i class="fa-brands fa-bilibili"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">åšå®¢è¯•è¿è¡Œï¼é¡µé¢å› ä¸ºæ€§èƒ½åŸå› æœ‰å¯èƒ½ä¼šå¡é¡¿<br>ä¸»åŸŸåï¼š<a href="https://www.fdxblog.tk">www.fdxblog.tk</a><br>å¤‡ç”¨åŸŸåï¼š<a target="_blank" rel="noopener" href="https://blog.fdxblog.tk">blog.fdxblog.tk</a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#type-%E4%B8%89%E5%8F%82%E6%95%B0%E5%8A%A8%E6%80%81%E5%88%9B%E5%BB%BA%E7%B1%BB"><span class="toc-number">1.</span> <span class="toc-text">type ä¸‰å‚æ•°åŠ¨æ€åˆ›å»ºç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E4%B9%9F%E6%98%AF%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.1.</span> <span class="toc-text">ç±»ä¹Ÿæ˜¯å¯¹è±¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#class%E5%85%B3%E9%94%AE%E5%AD%97%E6%98%AF%E4%B8%AA%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="toc-number">1.2.</span> <span class="toc-text">classå…³é”®å­—æ˜¯ä¸ªè¯­æ³•ç³–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B"><span class="toc-number">1.3.</span> <span class="toc-text">ç±»çš„åˆ›å»ºè¿‡ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#type%E5%85%B3%E9%94%AE%E5%AD%97%E5%8F%82%E6%95%B0%E4%B8%8E-init-subclass"><span class="toc-number">1.4.</span> <span class="toc-text">typeå…³é”®å­—å‚æ•°ä¸__init_subclass__</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hello-world-Metaclass"><span class="toc-number">2.</span> <span class="toc-text">Hello world, Metaclass!</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%9C%80%E5%9F%BA%E6%9C%AC%E7%9A%84%E5%85%83%E7%B1%BB"><span class="toc-number">2.1.</span> <span class="toc-text">åˆ›å»ºä¸€ä¸ªæœ€åŸºæœ¬çš„å…ƒç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%85%83%E7%B1%BB%E5%AE%9E%E7%8E%B0%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.2.</span> <span class="toc-text">ä½¿ç”¨å…ƒç±»å®ç°å•ä¾‹æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Python%E4%BC%AA%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-number">2.3.</span> <span class="toc-text">Pythonä¼ªè¾“å‡ºæµ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E6%98%93%E7%89%88%E6%8A%BD%E8%B1%A1%E7%B1%BB%EF%BC%9AAbstractBaseClass"><span class="toc-number">2.4.</span> <span class="toc-text">ç®€æ˜“ç‰ˆæŠ½è±¡ç±»ï¼šAbstractBaseClass</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%EF%BC%8C%E4%BD%86%E6%98%AF%E5%8F%AF%E4%BB%A5%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD"><span class="toc-number">3.</span> <span class="toc-text">Pythonï¼Œä½†æ˜¯å¯ä»¥æ–¹æ³•é‡è½½</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8B%B8%E7%8C%AB%E6%8D%A2%E5%A4%AA%E5%AD%90%E4%B9%8B-prepare-%E8%BF%94%E5%9B%9EOverloadDict"><span class="toc-number">3.1.</span> <span class="toc-text">ç‹¸çŒ«æ¢å¤ªå­ä¹‹__prepare__è¿”å›OverloadDict</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E5%8F%98%E6%96%B9%E6%B3%95%EF%BC%8C%E6%8F%8F%E8%BF%B0%E5%99%A8%E6%98%BE%E7%A5%9E%E5%8A%9F"><span class="toc-number">3.2.</span> <span class="toc-text">åˆ—è¡¨å˜æ–¹æ³•ï¼Œæè¿°å™¨æ˜¾ç¥åŠŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8%E5%92%8C%E7%A9%BA%E7%B1%BB"><span class="toc-number">3.3.</span> <span class="toc-text">è£…é¥°å™¨å’Œç©ºç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E8%BD%BD%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">3.4.</span> <span class="toc-text">é‡è½½çš„å·¥ä½œæµç¨‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%88%91%E7%9A%84%E7%88%B6%E7%B1%BB%E6%98%AF%E6%88%91%E7%9A%84%E5%85%83%E7%B1%BB"><span class="toc-number">4.</span> <span class="toc-text">æˆ‘çš„çˆ¶ç±»æ˜¯æˆ‘çš„å…ƒç±»</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/12/09/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AF%B4functools%E5%8C%85%E6%98%AF%E7%A5%9E/" title="ä¸ºä»€ä¹ˆè¯´functoolsåŒ…æ˜¯ç¥"><img src="/img/cover2.webp" onerror="this.onerror=null;this.src='/img/default_cover.jpg'" alt="ä¸ºä»€ä¹ˆè¯´functoolsåŒ…æ˜¯ç¥"/></a><div class="content"><a class="title" href="/2022/12/09/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AF%B4functools%E5%8C%85%E6%98%AF%E7%A5%9E/" title="ä¸ºä»€ä¹ˆè¯´functoolsåŒ…æ˜¯ç¥">ä¸ºä»€ä¹ˆè¯´functoolsåŒ…æ˜¯ç¥</a><time datetime="2022-12-09T08:13:56.000Z" title="å‘è¡¨äº 2022-12-09 16:13:56">2022-12-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/03/Python-def%E5%85%B3%E9%94%AE%E5%AD%97%E7%AB%9F%E7%84%B6%E6%98%AF%E8%AF%AD%E6%B3%95%E7%B3%96%EF%BC%9FCode-Object%E8%AF%A6%E8%A7%A3/" title="Python defå…³é”®å­—ç«Ÿç„¶æ˜¯è¯­æ³•ç³–ï¼ŸCode Objectè¯¦è§£"><img src="/img/cover7.webp" onerror="this.onerror=null;this.src='/img/default_cover.jpg'" alt="Python defå…³é”®å­—ç«Ÿç„¶æ˜¯è¯­æ³•ç³–ï¼ŸCode Objectè¯¦è§£"/></a><div class="content"><a class="title" href="/2022/12/03/Python-def%E5%85%B3%E9%94%AE%E5%AD%97%E7%AB%9F%E7%84%B6%E6%98%AF%E8%AF%AD%E6%B3%95%E7%B3%96%EF%BC%9FCode-Object%E8%AF%A6%E8%A7%A3/" title="Python defå…³é”®å­—ç«Ÿç„¶æ˜¯è¯­æ³•ç³–ï¼ŸCode Objectè¯¦è§£">Python defå…³é”®å­—ç«Ÿç„¶æ˜¯è¯­æ³•ç³–ï¼ŸCode Objectè¯¦è§£</a><time datetime="2022-12-03T11:27:05.000Z" title="å‘è¡¨äº 2022-12-03 19:27:05">2022-12-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/28/Python-%E8%A3%85%E9%A5%B0%E5%99%A8%E8%AF%A6%E8%A7%A3/" title="Python è£…é¥°å™¨è¯¦è§£"><img src="/img/cover1.webp" onerror="this.onerror=null;this.src='/img/default_cover.jpg'" alt="Python è£…é¥°å™¨è¯¦è§£"/></a><div class="content"><a class="title" href="/2022/11/28/Python-%E8%A3%85%E9%A5%B0%E5%99%A8%E8%AF%A6%E8%A7%A3/" title="Python è£…é¥°å™¨è¯¦è§£">Python è£…é¥°å™¨è¯¦è§£</a><time datetime="2022-11-28T10:23:30.000Z" title="å‘è¡¨äº 2022-11-28 18:23:30">2022-11-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/21/Python-%E6%8F%8F%E8%BF%B0%E5%99%A8%E6%B7%B1%E5%85%A5%E7%AE%80%E5%87%BA/" title="Python æè¿°å™¨æ·±å…¥ç®€å‡º"><img src="/img/cover1.webp" onerror="this.onerror=null;this.src='/img/default_cover.jpg'" alt="Python æè¿°å™¨æ·±å…¥ç®€å‡º"/></a><div class="content"><a class="title" href="/2022/11/21/Python-%E6%8F%8F%E8%BF%B0%E5%99%A8%E6%B7%B1%E5%85%A5%E7%AE%80%E5%87%BA/" title="Python æè¿°å™¨æ·±å…¥ç®€å‡º">Python æè¿°å™¨æ·±å…¥ç®€å‡º</a><time datetime="2022-11-21T08:17:46.000Z" title="å‘è¡¨äº 2022-11-21 16:17:46">2022-11-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/18/Python-Metaclass%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/" title="Python Metaclasså…ƒç±»ä¸ä½¿ç”¨æ¡ˆä¾‹"><img src="/img/cover6.webp" onerror="this.onerror=null;this.src='/img/default_cover.jpg'" alt="Python Metaclasså…ƒç±»ä¸ä½¿ç”¨æ¡ˆä¾‹"/></a><div class="content"><a class="title" href="/2022/11/18/Python-Metaclass%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/" title="Python Metaclasså…ƒç±»ä¸ä½¿ç”¨æ¡ˆä¾‹">Python Metaclasså…ƒç±»ä¸ä½¿ç”¨æ¡ˆä¾‹</a><time datetime="2022-11-19T03:48:32.000Z" title="å‘è¡¨äº 2022-11-19 11:48:32">2022-11-19</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By Fed_Dragon</div><div class="footer_custom_text"></div><div id="footer_site_ontime"><p id="ontime_value">2022/10/29</p></div><div class="framework-info"><a target="_blank" rel="noopener" href="https://hexo.io"><img src="https://img.shields.io/badge/Framework-Hexo-83855d?style=flat&amp;logo=Hexo" alt="Framework: Hexo;"/></a><a target="_blank" rel="noopener" href="https://butterfly.js.org/"><img src="https://img.shields.io/badge/Theme-Butterfly-83855d?style=flat&amp;logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAIy0lEQVR42u2bdXjbShbFs8y8%2B88yMzMzMxVMMZTrKEyPw4%2BfU2ZmBttlbh8zMzPaLtetPTu%2FzytVcSJbkpWH%2FuN%2B32junXvPOYK5kpMKIcRr2soClAUoC%2FCaF6AsQFmAMZ3Rz%2Flb58f8DdNuDrTO3xhsW9UY7Fr%2FsVcLSbjACW5whCucBQKEzl2luP%2FuEu7f%2FyXP%2Fio8%2F%2FAKr6f%2BpG9szwv%2Bc1Zc%2FEohDFYwgx0OcMnnB2e4V3h9DWkmzJh3eDgTaJm7ZUjb7ne%2B3EiDCWxgNMsH7hXuvwzhwJKhqr9u8p2h82OffqmJgwEsYLLKA%2B4VnmHjs%2F0cf5CX%2F39GCm%2FgbOFx1UjCvoGF%2BHcwGzx31RkvFXlqg2EgbGAGOxzgAqf8GLhXBBqmPKlN%2FnWo8DUvEf5pjwr%2FrGf7WGXkduGrmy2Tjeib6I%2F%2FEP766Te82OSpSW0dFrCBEaz5%2BOEENzhq8XCvGH3hmnM48LprhX%2FKQwQXtcoLrxaeytY%2BxX3Bs46N7oh%2FbbCJU4Na%2BtpgAZMZ7HCEK%2BvgXhHYLd7qDzamldWPidHLnifItFV27hKeIWN0t0QoG%2BqM%2FXawyJObGmo9aoPBCmY4whXOcK8gcc26Z6dWx5ICC69NiODc58wnnfm08NbO0rYaz39HZkf3xH%2FgNHlyklvdoqlJbbM44QQ3lSectUaoOpb4lerAlGhSjFpi8Wro2C7UHcU7bFzGyduBXORUn9zUsoINLnDSc4SzJsCQleINcvJZHHobt%2FoFEZhjQYTIbewMORFcVafUbku1SGdkz4SuCf8yIoqPGP0cOchFTnJTwywesMMhnxdc4awJgMnJ2TjzTdmYFCMWPmdehAl3Cc%2B%2F%2FLkH44hzD%2BcT7O3qTU3qmfTFfPLM4csXiBzkIie5zeIAM9gH4gRXcvcVIJr6M04jG7viBeGfbVKE3juE55%2B53kH23Rv0hCTJiLRd%2BQIwh08%2Fx1pykIucZmqDEayFuMC1nwDKJvEW6cwUWli1PiFC858zJ8IlNwr3n%2F4p3H8bLoIXxH6s1pkxY8abJNH75Jn%2BqTrHmDl86hxrWEsOcpmoCTYwFiQPR7j2EwBT4slHCCqsXlKMWW7uavC1LNN6BH2dSFfEJQlvU48Z93b3evUx6l5PDjNnHUxgK4YfjobfA6pjqf0EmTGUNvNs8PjPzN0KLfO26mq9TpK%2Bubej9weYHN%2FW1tb2etVPLGtYa%2BZeB4tZ3HAsIEBisflE2k5RuG%2BY%2FACvnrSggkZGdxXUSuJxTI7r9c0OsaxhbaF9ndpW8cLRUAAlluy2mFDrG0Yvfb5gx0jz4gu0HtcEOD%2FySUk%2BK01M6pz0KXWeGGILdXjUoqYdrHA0vgLiyZEE2bXwOuOHpHd85P%2B7woK12tn%2Bd%2BgZTD3GRwyxRg85apSCEY5GAmgdYak2dtUAt8XUh%2BniBB0dtf7147989fff%2Fr3AGDOHjxhi8y93cjqBDY6GAtSvf%2F5jBDliUSnEyr6dpK9%2Bbu419MzFS1y%2F%2B%2FMNf%2FjO7wXGmDl8xOg7OXKQyylccDQSgIPXyaBjBDplCtvmCoTIvZOzt3vd1WnIDvnVnwXGmDl8xBDLGtY6iQVucDQQQHsO7CHYaYMMr6K%2B5kXCO2RUv%2B92zOEjRiPusMGt6O8CSizxb4IHyU4p655NVI5pP5QvAHP4iBms%2BnArKgBWE010ygUn7BSp2XxQ1G09LOp3HBUNu46Lxr1p0bz%2FpGi5IiNarxICGz9xq548xpzmJ5Y1rCUHuchJbpvkT8DJ0i9D41c%2B886a%2BMG%2FVsdT4ZpY8kx5%2BVworUc%2BkJplOzmmdsuhsAR3J0CbL89I0FnAF7WmfSfFuIvX5QvAHD5TOahFTWqDASxgAhsYwQpmsMMBLo7%2BNNa4J72o5cpsFjBWrVaexfCUHcLz539q5Bkzh89OTrCAadB%2FG6zbefQjTftPPUJRO9a4%2B3juPWLiJjEqfI7w%2FvU%2FAmPMHD5i7OYHGxgHRYCGPUddzVdk0nbBtchLtiaeyglwySoR7pglwu0zMcbM4SOGWNsigBGsjgog78321iuztkGxVt6np1vmngWQ1htzmp%2FYUuuB2REBGnan%2FS0lgMHqth%2BBWM42PgfhgQyfFseaUmqCGewlC9B8IHOYhCXe95opK%2B43FACfFlvi8wADe0kCNO48FiyJ%2FN50%2F2Zk9lWGAuDLjydHKRjgYFuApt3HGx0685pV9W7U3fcLM5h6jE%2BLdehKgIN9AfYcV%2BwUbdh5zOAN8QUR7porNMIXrziMqcf4iBloLTntYIGDbQEadh8babEgbatxL778PohqVhVZ%2FyimmyPGcD25reKBg20BlE3i3aY7viuFqNt2pPDLyOwr%2Bwowaes6TDdHTKEc1KCW6Q4RDiXtAk170zea6c1rtx4u%2FiU5sqGvADP2DMF0c8QUy0MtU%2B8eYC95G2zcdeQfxZ70NZtShUFjG5%2FnHtc3PllZ4PUYY91zgNii%2BahZbIcAuyOdYPO%2B9C39z3pGXo6Hzb%2BLL7lDf%2Fbp%2Fa9X8zPW%2BYg1nRcMYMnHB2bHWuGG3Qc%2FKF8%2F06e3uBOiOtfXm7aqyduERrJztqiZcUD7aYwxc6qfWAu5wQImjTxYweyUANqO0Lj3RNbWRwm2v%2B75pwleuv7x%2FPzMqX5iWWPnYwwYwer863AJ3wuVpXf1vfyn7xqfn5s5fQxrSvzu57wANdFUlR1QVfJjh0bu0rXPGuXHp8axxk4tMA7eB5EtqffLIk9Zu%2FwTudffzjmiakLs9sC8G99rlB8fMcSyhrVWaoENjIMlgP4PKU6ZvvyX3S3o9pRpe79ltgaxrGGtlS%2FOYHtR%2Flxe2Zj4hdkrQVl869a2tt1vtFqDNaw1e%2BbB9KL%2Bv4ASTX1fFk4XvB9jyaltbeL1dmuwlhxFyKfB8pL8w4QST7kkgAcM9ubziHHCyGVA%2FgEwvKT%2FMcJZUjYd%2BlB47cEP1EYTv%2BT7vBJNfAOfk0ZOclODWtSkdvlfZsoClAUoC1AWoCxAWQDb9j9N63hK2EtncwAAAABJRU5ErkJggg%3D%3D" alt="Theme: Butterfly;"/></a><a target="_blank" rel="noopener" href="https://vercel.com/dashboard"><img src="https://img.shields.io/badge/Host%20By-Vercel-83855d?style=flat&amp;logo=Vercel" alt="Hosted By: Vercel"/></a><a target="_blank" rel="noopener" href="https://dashboard.4everland.org"><img src="https://img.shields.io/badge/Host%20By-4everland-83855d?style=flat&amp;logo=image%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAMIUlEQVR42u2aW6xc11nHf2vt69zPzcfH8QU7J3Ecx5c4OEkTRCgIKhpVQUFBRVDRB64KttIGIiRAgj4hkbQVt0rwglKQqj60aROQlTaECEMoTus6SW1iu3Z8Ofa5zpkzlz37vhYPa2%2BfU4mHgOI2UWakpT2zZ885%2B%2Fut7%2FL%2FvhmhteaD%2FJB8wB8jACMAIwAjACMAIwAjACMAIwAjACMAIwAjACMAH8CHTQey45ACuYbMgkxBGoH2wHYhz8CqQtwHbxyiIWQJYEGagnRBOhAOABtyBQoQNkQKvDFzfphzsDNgd6XJR9sDEC7kEtZi8DxYGHJeSY7PjPHaW23i5Ri0gGFurtkxBhc7MFYBIeD8GkxVzTW2hDCDxSEcmIaVEBoeaAVni%2BvunYFvXoUxHxLgYg%2Fsm07Yhjzh1iDgiFXjt5otak4FmuPmxjNgqzY3b7kwSOFqh1e7MU97Nl9L1PswBLQGATgODHv8WbfHeWXzaelS86vm%2FTCCQQTD4hilZmfGK1B3eFAonrvS4VtJzkHfNp%2B5OSFwM%2F6oC0nA7FrEP0WCPbVxcOuQA1kOuQANSGGuF4VxeQ5Sw5YG1D3IF7h%2FbsCpXs5TEzWeseX7wAMsAemQ3wsyTic%2Be8a2glczBiPNUWBiuFyWAHvDaynAd%2BC%2BrXBgCjx4eqnPP6%2BEbHffZW94VwAICbYDKA4Merw6SHnGmsBrbDKJMNdmURiPAGmBlGBJ87w03BEYShpQsKMJP7MDtvg8fKnNuZUhj9c9cCQo%2FaMGIMCyIA%2BpB2s8Oxjyeih4wN0MXsOAMdtt%2FpMqYLF%2Bav1YeIIQYGEMtC3jGQ0XHtgKsw38OOZvFvp8b2HIz3vWehj9cHOAMLsnNGNpwpEg5GgkmKYC1QkQPmi5bqGwzE7nxcbK4rwW6zAsYXZUCnAs4%2BZlAVCY9w7PmM9e6HJXAseweC5RfN61OW7JwrtuNgDLBTlkUxJzNEo4EsG4roErjVaQTVB5AcAy1ilhXktRxK80xmux7gH2hvwgAZ0ZcFIar6AIkT2T5oIog7mARzsBj9o2z49V%2BQsteFmK%2FxuIdwRACLBskHBHsMxnhwE%2FG4FH1WRt5Rgwwi9ygWtiXlEYr424UsU5XQglXe5uIcLyDUchwCm8xZFQcSFVsNOG5dCIo5YPwwze7vHIfJdHbIdXMs3T0uIbtiSzCsj6%2FwWgTEaCmUzxq8ESn4pStkUx6Ao4DYhjzlQbjDk%2BZ4OYMWuCdnuOL3cHKFyE7Zkk6Hrg%2BuAWoCx7QxiUClRBkhtBFETQi6ETwiCBfgLdGJQku38Hh3e1%2BMiJeTrbm2w900He2mTaltinVviw1Hz4%2FDKDQc7f3znJV5XmFVe%2BUwCi2B3BeB7xMWGxL%2BlzJBuyaNc512gwP9XitJzgerLCC3qImN7PPrfOZP9N3m77fPlKBt2OCQdfgfSMV1gWuK6B4TgmwZUpONeQ5satSSAtjlEKvcjI2sUBSBuaNs%2FOKdy4xtHLmnzNZalRRQ4zfmrbJi7Ymtlhxq%2F3%2Bzz%2B5gofSxSnGw7frlgcq1icuKE%2FdAlAGh%2FUOVUFHxWST9gpY%2F40E26NTCU8K6f4c8%2FmgHBQeOxFMNR1mqLOQ8CyusDZxhYWKhZcrcCiBeOF0WUMaw1KGbEjingvs1yujXtnedFHFDdnSZMQfRtqLjQsWMlg2xTJdwOa3Zj88BaWrwU4fcW3Dt1C78qAwW0VPnMPrL54hXoYcuhSyIH5mMNVj7vynC%2F2Ep6XNicFIHRH17OT%2FGGueByPqpSELPLHzp2sodlPk2VWOZ2vcp8UrNJgQQeMiSa36oxrtIjUeV4kZ96ukQYRvLACsQ2tCmgb6g1ojYHvGy9wXANHiB8EEGcQJNAfwlIAlzuwFhn3z2K4asN8FaZ9ON3msUmfMMzp7x%2Fnx2PF9bWYbGeD3eMec%2Bd6eNtqbG6HnDjVJmw4bLXgk0Jz10wVqeDYfy7xJyI%2FqZ9Xb%2FKyvJ0LYoigRpuAVPfZzhgdeYix%2FF%2BJyVkiZkrsoUOXKruYEYoIB0dd5iJtLiFZtjyIczgWgqxArQqWY5ZfJMkyJDbmgBJAmEI%2Fgm5k8sFaBP0AvpvAGQ%2BszHSnkz6%2FEWRcSxWJ0ogwZ9CPcXc0YJAiBil116KjNNmkzxSC4U9uZvL7PRYqFjuvB9z7RpuXbWzO4bMPjwkUi0KQakjJiYWL1BewGLJGFYmHJWyaTFFVJzmvJ5iSd1NFo8mLqFLQt6DWBL8KM5thdQ1OXzRJLs1NC5wVnWBZAVIMhBRzfvsU3LsLlgOY70A7gCsprOWmzCoFaU6eKFKlafgWYeaQVm3qlsDKNXbdYWItoe9IeklO35bM3DPFvpUQ%2B5tXuX54Ez9hyzv4fa3466zLH6gESyjmLc28vZuv4LCkV2iIaU6KOo%2BJhJ62UGimCOhoG1v3sXWfATUGdh2ur8K%2FpdBqgFTmRrWGLIM4NbucCbNS1ktfCSAXoKTJBbk2eSFQsA24M4IrddhWg%2BNzrO6dpBFlcL5HfXcT3fIZn%2FTZO%2BlyeT6ifrZDtx1younw8ck6B08scs%2FWCoeUZn5Pk2dvbfKPdpGIjqiQI0mfX1AeH9ewX1ziCafJFgHHtUZ7iqp0eVMO2U0NZd1FhYQH6DNHi0Nyih3K4hsnV8DW4JaSvkxoljmvitouhSkCJQCJAZZhIJSiqRRHXQXNHB4dh9ldYEvu7ycED22lP9tnuWmxH%2FjeYsjcpR6eL1jMUh704BNRxIdCjbU64JX5Hk%2FsaPHizgZnFWCXikTYIF2%2Brut8PVmDuM2dFjyZhXxEaf5ShyAdLhNwypnhat1j33CVxfoE1Gf56e7rHP9OD7oBtJpm51y9XglytWEVRub8oPjJSgBFVXaKRJkVoTNU8O9n4dUl2HMLjYHEe%2B0K0cFJ7tCa%2B04usrMXIzsxvwSMS0F3h8%2Frec6nOyFfazosRMCYZ8Kx9r8KIWVu2K7z38LiNy0JXotPBsv84jDnkVDyY%2BoK2HVIchb8izhenUZfcHfWYu8tVVzcG4JHxDFuHPOKY%2FOGMk5wQ9qWequcB1A0RFqilMbvRfyy0tTqPonCCCkByVAzO%2Bxw37TPlktDhm9FjCUarvUKmaw5t73JX2XwpVzx1uYaLMcm%2FEQB%2FIbO04EmPwdZG9IA8hqkA0iHIJpGk7vjEK%2BAVWU2zTg6HHI0iJFUQVugLGOwPw5UTdyrQt2leVHurXXZW%2FYBN16XHqDXJXSqzKJol8tq4dvw6jxcGxiQQQrneyaHTNX5j6bP5%2BYGfHVHw%2BiIhQAmfOhnEGTmuu1NEArGq%2B%2BkF9BGHeYKhOSC2%2BRTbpPP10Ke6HZ4dDBgp%2FYNqKjcTV2AKWJZWuvDEIrGiA06vZwXpArScnYgTblLtBnAxkX%2F8FYHrg5gmMDFvhFVt7T4l9sm%2BGyiOdaJCvBqvZt897pBbW5Kay5XN%2FNkmvGkgKdyiz8ahLSSBFzLyGCtjaFKGoBaGC%2FQhdy%2B0REWO1%2FueI7REYky5xNlVlz0CmdWYG4AqYDpJsdmJ%2Fhcy%2BOlmg3nu8bjxA9jIJKnRrM7FZ5ujDNblXzGSiBcgnhgfFsok9G0Wr8ptaE0lksVK9fG08pzaWF0rIyrn5g3o%2BxAc6xe4aHdkzzcdHmpF0OU%2FwgmQoIb%2Br4tLf50rMXdTZuX8jaEa8ZwWQxPwAgYCqNL3Z8X%2FUGujDekxc6XoaGAdmiMfzsgmmzw2%2BMVHnYEx6PMAHpPDEWV6SJfb03zc60Kv6M7JP1FyBOT2SmmPWVjVILYOA9QRdDemBsA3%2B%2FAtxdgNeMrt0%2Bxe6rC3%2BkNM8b33FQ40%2BBW%2BdtGhdvp8V%2FBEkQDkxxFUX4sud4IlSDkhqSoi%2Bx%2BahFOLkMIv7JrnMdcwdUyXN67X4xo49KZ5sqmGT5UkTzVu85c2C00xsap74anpT7Qwrj8d%2BbhzCr%2FsHeGgxMVvhSm6yXzffHlqBCmxrg%2Bz1hwWxbyu%2BGAN%2BLQKLxS6pZTXcuCYQoLfZau9%2FliJ%2BFA3eXXGg5vCN5ZSXvPfDN0wxmKjI8kdj2%2BECZ8gZwH51bYWWtwaGqKQ0ECmab%2F2kWea9SJIs0LrkVYdyCOTVLUN3GnxOjn8qMfSIwAjACMAIwAjACMAIwAjACMAIwAjACMAIwAjAB80B7%2FA4t1%2F6lyzbV6AAAAAElFTkSuQmCC" alt="Hosted By: 4EVERLAND"/></a><a target="_blank" rel="noopener" href="https://github.com/FedDragon1/FedDragon1.github.io"><img src="https://img.shields.io/badge/Source-Github-83855d?style=flat&amp;logo=github" alt="Source: Github"/></a><a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-83855d?style=flat&amp;logo=image%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAHwAAAB8CAMAAACcwCSMAAAAMFBMVEX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F9Or7hAAAAAD3RSTlMAESIzRFVmd4iZqrvM3e5GKvWZAAAE5UlEQVR42u1b24KFJgwUCBhAwv9%2Fbe%2FteoKMskjv87jLYUgYYhJxG4fzHHOuJ%2BTM7N22GDbwUbvIHMwqZsel3uJgt4A5Sn2I8jJ%2FOOoQjtf8b1jqMITNUur19EFRj9HPyeyoUyh%2BwuN1GsksNxtAvmX8Ds9SZuZAROSZOecKEIeNN7HLy8G1463n3P2FG%2BO21y6X6IEZxkd5wfXucpL0YA5%2F7bH9OTddcAvbmagUn3KH2XAVZJgdcLOZj8nRfIs7220YNrXTPNjvxuNALAhehj3vBBzSMZg0yG4FjJ8PkgwXewydz%2FEzG8Bg5SjRY6cfTtLfRAYjAUZ8WQwW%2Bjw3Yk%2BdYaXhXsHu8YbPcyN2sVsL3yxwEXu6dXp4tdyRG7t4IrYMxuzShLbPmPp2tbnDQJegJuaRP%2BY3wC9hex1G%2BqZnJcf34bumu7VOV%2FYp06P%2BxwJYJXjw9wXgRlbtn2kJs9bc8cefC07zlphutRCXGq5MZy23ZTsOiORRfLFEwRPBc%2BiIdiIyTwTvGq9Lx2F7li9V7O5y5j2f4tRu7846N87gy2ljVci%2BsbkZkwhXQ0ej9SubLqvObGH3plOdmXqCUaG1tNQmo14L7t6IQ6maV49ahimQQugkKog9KLLYel1zY3aruBG7VeGsIK3nCiAOrK%2BTE50Hf2ogPWmHacFyheB%2BnLEfOQzD9KOwJwpZ5aEq%2BWMi2j98YbubTtsO4jpftUboj6lLUKZIaKrTrOZ0H7aeCQwwPGgRlqAVJE5XAZk2jQ%2Fy3D%2FlviMHK79RK1XsykLdc9aKy2fyvCFxnMBfnfTu2rmE7QKffKVfphSl6y%2BYSy92hnR1JOrXvUDMD%2BogGk5nADmeuJXFNkUe%2BuT2iRMfIXTICawRkI9lnvR3Iv%2BfHAjOvSY4P37U%2FIOpzJvn3A4GGT9OLv3wKt1njqM2vOqfe3tPDh4sqWtWrtG2aZFVz%2BN4RZ87TzUBwag02VW02pDUrDxaSA6TCdWZ06lytKqhEtqFRwuSCZhGxcv3wbuc2dpWi6pgPFAxSiCtfpdJRHxOtW3TXGQi8izdBrv%2F0JFBXQmuEDtK7e%2FDpsNFAy4IEixYWmfqpaoDRbBf3ClGCHBHkLxmUCgCdlUIhefcWmGoRAblb3ywwh3Gt6BbMu7htQ3xoIgH7yKLjipR26Nh4%2F0LbdL0l2m7a9oiQbeDW9hTQ6hE3xvzxRzd7VOF2ygKW2E%2BEJmbVlgAY652OC1vAoInVdCmr0K5OtWy3PTWSIc74UsNPzrNfvNnGB5Wv%2BYAfQ4xvTdbbn2rn7v9tmMBtbLP6n8tdbwp4GmXljpeqUosTNfMSqVXxulafpfb4Usb%2BuV9XPzyHt8V4bXXFjRUyhDWXtjAjq9h9VUVJYsF7FZxx6e3uPhlreHbGFGxx7fvaYvD%2B%2FPmtRG%2Bqdyw6KrQxHZnzR3G9mhi473gCuYRe6FvmZ1w5YbZp%2B5pbyyQG7BPf58QCq7UMfsEvaIejliu1G%2FftLbK4WNXOUE7JIcb801I%2BH3u3MX%2BtHftt4p5IlTttQdJTFatlTiVx02h8Y3XKDnzL8j5WPA5h%2BqHrP6QRYPKgq9Y1n81Nf5FAG4GjSPa%2BTwoLabGcHExNYblIekVfrnc8k%2B9L5FWtBZClHub%2FbYMbu%2BH0RKD3VbD0M45y4k1Jw7f8fWPsLFGZr3MQTIAAAAASUVORK5CYII%3D" alt="Copyright: BY-NC-SA 4.0"/></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script type="text/javascript" src="https://yijuzhan.com/api/word.php?m=js"></script><script>document.getElementsByClassName("footer_custom_text")[0].innerHTML = `${str[0]} â€”â€” ${str[1]}`</script><script>let element=document.getElementById("footer_site_ontime"),startDate=new Date(element.innerText);function getTimeDelta(){let t=new Date,n=new Date(t-startDate),e=n.getFullYear()-1970,p=n.getMonth(),s=n.getDate()-1,a=n.getHours(),r;return[e,p,s,a,n.getMinutes(),n.getSeconds()]}function displayTimeDelta(){let t=getTimeDelta(),n;n=0===t[1]?`æœ¬ç«™å·²ç»è¿è¡Œäº† ${t[2].toString().padStart(2,"0")} å¤© ${t[3].toString().padStart(2,"0")} å°æ—¶ ${t[4].toString().padStart(2,"0")} åˆ†é’Ÿ ${t[5].toString().padStart(2,"0")} ç§’â¤`:0===t[0]?`æœ¬ç«™å·²ç»è¿è¡Œäº† ${t[1]} æœˆ ${t[2].toString().padStart(2,"0")} å¤© ${t[3].toString().padStart(2,"0")} å°æ—¶ ${t[4].toString().padStart(2,"0")} åˆ†é’Ÿ ${t[5].toString().padStart(2,"0")} ç§’â¤`:`æœ¬ç«™å·²ç»è¿è¡Œäº† ${t[0]} å¹´ ${t[1]} æœˆ ${t[2].toString().padStart(2,"0")} å¤© ${t[3].toString().padStart(2,"0")} å°æ—¶ ${t[4].toString().padStart(2,"0")} åˆ†é’Ÿ ${t[5].toString().padStart(2,"0")} ç§’â¤`,element.innerText=n}function startCountDown(){displayTimeDelta(),setTimeout(startCountDown,1e3)}startCountDown();</script><script id="canvas_nest" defer="defer" color="131, 133, 93" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>